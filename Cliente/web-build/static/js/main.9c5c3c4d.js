(()=>{var e={133:(e,t,o)=>{"use strict";e.exports=o.p+"static/media/fondo.9a1d4aab5a7136f9cd2b.png"},6782:(e,t,o)=>{"use strict";var a=o(9993),r=o(6665),i=o(3929),n=o(6283),l=o(3668);const d=(0,o(5416).createClient)("https://ytnltiztodeesagxdadu.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl0bmx0aXp0b2RlZXNhZ3hkYWR1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc0OTQxOTcsImV4cCI6MjA2MzA3MDE5N30.px8gnjRpc8F1L-TQ_rK4FLo0ssWoczedxq3zNssCgmc");var s=o(397);const c=(0,r.createContext)({productos:[],agregarProducto:async()=>{},editarProducto:async()=>{},cargarProductos:()=>{},eliminarProducto:async()=>{}}),f=({children:e})=>{const[t,o]=(0,r.useState)([]),a=async()=>{const{data:e,error:t}=await d.from("productos").select("*").order("created_at",{ascending:!1});t&&console.error(t),e&&o(e)};return(0,r.useEffect)((()=>{a();const e=d.from("productos").on("*",(e=>{console.log("\ud83d\udd04 Cambio detectado:",e),a()})).subscribe();return()=>{d.removeSubscription(e)}}),[]),(0,s.jsx)(c.Provider,{value:{productos:t,agregarProducto:async e=>{const{error:t}=await d.from("productos").insert([e]);t&&console.error(t),await a()},editarProducto:async e=>{const{error:t}=await d.from("productos").update({nombre:e.nombre,precio:e.precio,condicion:e.condicion}).eq("id",e.id);t&&console.error(t),await a()},cargarProductos:a,eliminarProducto:async e=>{const{error:t}=await d.from("productos").delete().eq("id",e);t&&console.error(t),await a()}},children:e})};var u=o(8411),h=o(765),g=o(1385),m=o(6773),b=o(1690),x=o(5648),p=o(2772),y=o(6933),j=o(5259),w=o(7366);function C(){const[e,t]=(0,r.useState)(""),[a,l]=(0,r.useState)(""),[c,f]=(0,r.useState)(""),[u,h]=(0,r.useState)(""),[g,C]=(0,r.useState)(""),[v,T]=(0,r.useState)(null);(0,r.useEffect)((()=>{j.default.getItem("usuario").then((e=>{if(e){const t=JSON.parse(e);T(t.id)}}))}),[]);return(0,s.jsx)(y.default,{source:o(133),style:S.bg,resizeMode:"cover",children:(0,s.jsx)(p.default,{contentContainerStyle:{flexGrow:1},children:(0,s.jsxs)(i.default,{style:S.profileCard,children:[(0,s.jsxs)(i.default,{style:S.profileHeader,children:[(0,s.jsx)(n.default,{style:S.headerIcon,children:"\ud83e\uddd1\u200d\ud83d\udcbc"}),(0,s.jsx)(n.default,{style:S.headerTitle,children:"Perfil del Usuario"})]}),(0,s.jsxs)(i.default,{style:S.cardBody,children:[""!==g&&(0,s.jsx)(i.default,{style:S.flash,children:(0,s.jsx)(n.default,{style:S.flashText,children:g})}),(0,s.jsx)(n.default,{style:S.formLabel,children:"Nombres"}),(0,s.jsx)(m.default,{placeholder:"Nombres",style:S.input,value:e,onChangeText:t}),(0,s.jsx)(n.default,{style:S.formLabel,children:"Apellidos"}),(0,s.jsx)(m.default,{placeholder:"Apellidos",style:S.input,value:a,onChangeText:l}),(0,s.jsx)(n.default,{style:S.formLabel,children:"Edad"}),(0,s.jsx)(m.default,{placeholder:"Edad",style:S.input,value:c,onChangeText:f,keyboardType:"numeric"}),(0,s.jsx)(n.default,{style:S.formLabel,children:"G\xe9nero"}),(0,s.jsx)(i.default,{style:S.pickerContainer,children:(0,s.jsxs)(w.Picker,{selectedValue:u,onValueChange:h,style:S.picker,children:[(0,s.jsx)(w.Picker.Item,{label:"Selecciona g\xe9nero...",value:""}),(0,s.jsx)(w.Picker.Item,{label:"Masculino",value:"masculino"}),(0,s.jsx)(w.Picker.Item,{label:"Femenino",value:"femenino"}),(0,s.jsx)(w.Picker.Item,{label:"Otro",value:"otro"})]})}),(0,s.jsxs)(i.default,{style:S.buttonRow,children:[(0,s.jsx)(x.default,{style:S.btnPrimary,onPress:async()=>{if(v&&e&&a&&c&&u)try{const{data:o,error:r}=await d.from("userprofiles").select("id").eq("user_id",v);if(r)throw console.error("Error buscando perfil:",r),r;let i;if(o&&o.length>0){const t=o[0].id;({error:i}=await d.from("userprofiles").update({nombres:e,apellidos:a,edad:parseInt(c,10),genero:u}).eq("id",t))}else({error:i}=await d.from("userprofiles").insert([{user_id:v,nombres:e,apellidos:a,edad:parseInt(c,10),genero:u}]));if(i)throw console.error("Error de Supabase:",i),i;C("\u2705 Perfil guardado correctamente."),t(""),l(""),f(""),h(""),setTimeout((()=>C("")),3e3)}catch(o){b.default.alert("Error","No se pudo guardar el perfil en la base de datos.")}else b.default.alert("Campos incompletos","Por favor completa todos los campos.")},children:(0,s.jsx)(n.default,{style:S.btnText,children:"Guardar perfil"})}),(0,s.jsx)(x.default,{style:S.btnSecondary,onPress:async()=>{if(v)try{const{error:e}=await d.from("userprofiles").delete().eq("user_id",v);if(e)throw console.error("Error al eliminar perfil:",e),e;C("\ud83d\uddd1\ufe0f Perfil eliminado correctamente."),t(""),l(""),f(""),h(""),setTimeout((()=>C("")),3e3)}catch(e){b.default.alert("Error","No se pudo eliminar el perfil en la base de datos.")}else b.default.alert("Error","No se encontr\xf3 el usuario.")},children:(0,s.jsx)(n.default,{style:S.btnText,children:"Eliminar perfil"})}),(0,s.jsx)(x.default,{style:S.btnEdit,onPress:async()=>{if(v)try{const{data:e,error:o}=await d.from("userprofiles").select("nombres, apellidos, edad, genero, user_id").eq("user_id",v);if(o)return console.error("Error al cargar perfil:",o),void b.default.alert("Error","No se pudo cargar el perfil.");const a=e&&e.length>0?e.find((e=>e.user_id===v)):null;if(!a)return C("\u2139\ufe0f No hay perfil para este usuario. Puedes crearlo."),t(""),l(""),f(""),h(""),void setTimeout((()=>C("")),3e3);t(a.nombres||""),l(a.apellidos||""),f(a.edad?a.edad.toString():""),h(a.genero||""),C("\u270f\ufe0f Perfil cargado para edici\xf3n."),setTimeout((()=>C("")),3e3)}catch(e){b.default.alert("Error","No se pudo cargar el perfil.")}else b.default.alert("Error","No se encontr\xf3 el usuario.")},children:(0,s.jsx)(n.default,{style:S.btnText,children:"Editar perfil"})})]})]})]})})})}const S=l.default.create({bg:{flex:1,width:"100%",height:"100%",position:"absolute"},profileCard:{maxWidth:500,width:"96%",alignSelf:"center",marginTop:38,backgroundColor:"#fff",borderRadius:22,shadowColor:"#3a0ca3",shadowOffset:{width:0,height:8},shadowOpacity:.16,shadowRadius:24,elevation:10,borderWidth:1,borderColor:"#e3e7ef",overflow:"hidden"},profileHeader:{backgroundColor:"#4361ee",paddingVertical:32,paddingHorizontal:28,borderTopLeftRadius:22,borderTopRightRadius:22,flexDirection:"row",alignItems:"center",gap:14,borderBottomWidth:1,borderBottomColor:"#e3e7ef"},headerTitle:{color:"#fff",fontWeight:"900",fontSize:28,letterSpacing:.8,textShadowColor:"rgba(0,0,0,0.10)",textShadowOffset:{width:0,height:1},textShadowRadius:3},headerIcon:{fontSize:40,marginRight:14,textShadowColor:"rgba(0,0,0,0.10)",textShadowOffset:{width:0,height:0},textShadowRadius:2},cardBody:{paddingVertical:38,paddingHorizontal:30,backgroundColor:"#f7f9fd"},formLabel:{fontWeight:"700",fontSize:16,color:"#3a0ca3",marginBottom:7,marginTop:14,letterSpacing:.3},input:{backgroundColor:"#f1f3fa",padding:14,borderRadius:10,marginBottom:12,borderWidth:1.3,borderColor:"#bfc7d1",fontSize:16,color:"#263159",shadowColor:"#4361ee",shadowOffset:{width:0,height:1},shadowOpacity:.08,shadowRadius:2,elevation:1},pickerContainer:{backgroundColor:"#f1f3fa",borderRadius:10,borderWidth:1.3,borderColor:"#bfc7d1",marginBottom:20,overflow:"hidden"},picker:{width:"100%",height:48,color:"#263159"},flash:{backgroundColor:"#e3f0ff",padding:14,borderRadius:16,marginBottom:20,borderColor:"#b3d1fa",borderWidth:1,shadowColor:"#4361ee",shadowOffset:{width:0,height:1},shadowOpacity:.1,shadowRadius:2,elevation:1},flashText:{color:"#4361ee",textAlign:"center",fontWeight:"700",fontSize:16,letterSpacing:.2},buttonRow:{flexDirection:"row",justifyContent:"space-between",marginTop:24,gap:10},btnPrimary:{backgroundColor:"#198754",paddingVertical:12,paddingHorizontal:18,borderRadius:13,flex:1,alignItems:"center",justifyContent:"center",marginRight:6,shadowColor:"#198754",shadowOffset:{width:0,height:3},shadowOpacity:.13,shadowRadius:8,elevation:2},btnSecondary:{backgroundColor:"#e63946",paddingVertical:12,paddingHorizontal:18,borderRadius:13,flex:1,alignItems:"center",justifyContent:"center",marginRight:6,shadowColor:"#e63946",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:6,elevation:1},btnEdit:{backgroundColor:"#3a0ca3",paddingVertical:12,paddingHorizontal:18,borderRadius:13,flex:1,alignItems:"center",justifyContent:"center",shadowColor:"#3a0ca3",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:6,elevation:1},btnText:{color:"#fff",fontWeight:"700",fontSize:16,letterSpacing:.2,textAlign:"center"}});var v=o(4767),T=o(5836);function z(){const[e,t]=(0,r.useState)(""),[a,l]=(0,r.useState)(""),[c,f]=(0,r.useState)(""),[u,h]=(0,r.useState)("ADMINISTRATIVO"),[g,C]=(0,r.useState)(!1),[S,z]=(0,r.useState)([]),[k,I]=(0,r.useState)(null);(0,r.useEffect)((()=>{(async()=>{const e=await j.default.getItem("usuario");if(e){const t=JSON.parse(e);C("ADMIN"===t.role)}})()}),[]);const O=async()=>{const{data:e,error:t}=await d.from("users").select("id, identificacion, username, role");!t&&e&&z(e)};(0,r.useEffect)((()=>{g&&O()}),[g]);const W=()=>{I(null),t(""),l(""),f(""),h("ADMINISTRATIVO")};return g?(0,s.jsx)(y.default,{source:o(133),style:R.bg,resizeMode:"cover",children:(0,s.jsx)(v.default,{style:{flex:1},behavior:void 0,children:(0,s.jsx)(p.default,{contentContainerStyle:R.scrollContainer,children:(0,s.jsxs)(i.default,{style:R.profileCard,children:[(0,s.jsxs)(i.default,{style:R.profileHeader,children:[(0,s.jsx)(n.default,{style:R.headerIcon,children:"\ud83e\uddd1\u200d\ud83d\udcbc"}),(0,s.jsx)(n.default,{style:R.headerTitle,children:"Gesti\xf3n de Usuarios"})]}),(0,s.jsxs)(i.default,{style:R.cardBody,children:[(0,s.jsx)(n.default,{style:R.formLabel,children:"Identificaci\xf3n"}),(0,s.jsx)(m.default,{placeholder:"Identificaci\xf3n",style:R.input,value:e,onChangeText:t,placeholderTextColor:"#b0b6c1"}),(0,s.jsx)(n.default,{style:R.formLabel,children:"Nombre de usuario"}),(0,s.jsx)(m.default,{placeholder:"Nombre de usuario",style:R.input,value:a,onChangeText:l,placeholderTextColor:"#b0b6c1"}),(0,s.jsxs)(n.default,{style:R.formLabel,children:["Contrase\xf1a ",k?"(dejar vac\xedo para no cambiar)":""]}),(0,s.jsx)(m.default,{placeholder:"Contrase\xf1a",style:R.input,value:c,onChangeText:f,secureTextEntry:!0,placeholderTextColor:"#b0b6c1"}),(0,s.jsx)(n.default,{style:R.formLabel,children:"Rol del usuario:"}),(0,s.jsx)(i.default,{style:R.pickerWrapper,children:(0,s.jsxs)(w.Picker,{selectedValue:u,onValueChange:e=>h(e),style:R.picker,dropdownIconColor:"#4361ee",children:[(0,s.jsx)(w.Picker.Item,{label:"ADMINISTRATIVO",value:"ADMINISTRATIVO"}),(0,s.jsx)(w.Picker.Item,{label:"CANDIDATO",value:"CANDIDATO"}),(0,s.jsx)(w.Picker.Item,{label:"VOTANTE",value:"VOTANTE"})]})}),k?(0,s.jsxs)(i.default,{style:R.btnRow,children:[(0,s.jsx)(x.default,{style:R.btnPrimary,onPress:async()=>{if(k&&e&&a&&u)try{let t={identificacion:e,username:a,role:u};c&&(t.password_hash=await T.default.hash(c,10));const{error:o}=await d.from("users").update(t).eq("id",k);o?b.default.alert("\u274c Error actualizando usuario",o.message):(b.default.alert("\u2705 Usuario actualizado"),W(),O())}catch(t){b.default.alert("\u274c Error general","No se pudo actualizar el usuario"),console.error(t)}else b.default.alert("\u26a0\ufe0f Todos los campos son obligatorios")},children:(0,s.jsx)(n.default,{style:R.btnText,children:"Actualizar usuario"})}),(0,s.jsx)(x.default,{style:R.btnSecondary,onPress:W,children:(0,s.jsx)(n.default,{style:R.btnText,children:"Cancelar"})})]}):(0,s.jsx)(x.default,{style:R.btnPrimary,onPress:async()=>{if(e&&a&&c&&u)try{const t=await T.default.hash(c,10),{error:o}=await d.from("users").insert([{identificacion:e,username:a,password_hash:t,role:u}]);o?b.default.alert("\u274c Error creando usuario",o.message):(b.default.alert("\u2705 Usuario creado exitosamente"),W(),O())}catch(t){b.default.alert("\u274c Error general","No se pudo crear el usuario"),console.error(t)}else b.default.alert("\u26a0\ufe0f Todos los campos son obligatorios")},children:(0,s.jsx)(n.default,{style:R.btnText,children:"Crear usuario"})}),(0,s.jsx)(n.default,{style:R.sectionTitle,children:"\ud83d\udccb Usuarios registrados:"}),0===S.length?(0,s.jsx)(n.default,{style:R.noUsersText,children:"No hay usuarios registrados."}):S.map((e=>(0,s.jsxs)(i.default,{style:R.userRow,children:[(0,s.jsxs)(i.default,{children:[(0,s.jsxs)(n.default,{style:R.userText,children:["\ud83c\udd94 ",e.identificacion]}),(0,s.jsxs)(n.default,{style:R.userText,children:["\ud83e\uddd1\u200d\ud83d\udcbc ",e.username]}),(0,s.jsxs)(n.default,{style:R.userText,children:["\ud83c\udf93 ",e.role]})]}),(0,s.jsxs)(i.default,{style:R.userActions,children:[(0,s.jsx)(x.default,{style:R.editBtn,onPress:()=>{return I((o=e).id),t(o.identificacion),l(o.username),h(o.role),void f("");var o},children:(0,s.jsx)(n.default,{style:R.actionText,children:"Editar"})}),(0,s.jsx)(x.default,{style:R.deleteBtn,onPress:()=>(async e=>{if(window.confirm("\xbfEst\xe1s seguro de que deseas eliminar este usuario?")){await d.from("userprofiles").delete().eq("user_id",e);const{error:t}=await d.from("users").delete().eq("id",e);t?b.default.alert("\u274c Error eliminando usuario",t.message):(k===e&&W(),O())}})(e.id),children:(0,s.jsx)(n.default,{style:R.actionText,children:"Eliminar"})})]})]},e.id)))]})]})})})}):(0,s.jsx)(n.default,{style:R.block,children:"\u26d4 Acceso denegado"})}const R=l.default.create({bg:{flex:1,width:"100%",height:"100%"},scrollContainer:{flexGrow:1,justifyContent:"center",alignItems:"center",paddingVertical:32,paddingHorizontal:8},profileCard:{maxWidth:850,width:"98%",alignSelf:"center",marginTop:40,backgroundColor:"rgba(255,255,255,0.97)",borderRadius:20,shadowColor:"#4361ee",shadowOffset:{width:0,height:10},shadowOpacity:.18,shadowRadius:30,elevation:10,borderWidth:1,borderColor:"#e0e6f1",overflow:"hidden",marginBottom:40},profileHeader:{backgroundColor:"#3434e6",paddingVertical:32,paddingHorizontal:32,borderTopLeftRadius:20,borderTopRightRadius:20,flexDirection:"row",alignItems:"center",gap:12,borderBottomWidth:2,borderBottomColor:"#eaf1fb"},headerTitle:{color:"#fff",fontWeight:"700",fontSize:28,textShadowColor:"rgba(0,0,0,0.2)",textShadowOffset:{width:0,height:1},textShadowRadius:4},headerIcon:{fontSize:32,marginRight:10,textShadowColor:"rgba(0,0,0,0.15)",textShadowOffset:{width:0,height:0},textShadowRadius:2},cardBody:{paddingVertical:36,paddingHorizontal:36},formLabel:{fontWeight:"600",fontSize:16,color:"#343a40",marginBottom:8,marginTop:10,letterSpacing:.2},input:{backgroundColor:"#f4f6fb",padding:14,borderRadius:12,marginBottom:10,borderWidth:1.5,borderColor:"#ced4da",fontSize:16,color:"#212529",shadowColor:"#eaf1fb",shadowOffset:{width:0,height:2},shadowOpacity:.08,shadowRadius:4,elevation:1},pickerWrapper:{backgroundColor:"#f4f6fb",borderRadius:12,borderWidth:1.5,borderColor:"#ced4da",marginBottom:18,overflow:"hidden"},picker:{height:48,width:"100%",color:"#263159"},btnRow:{flexDirection:"row",gap:10,marginBottom:10},btnPrimary:{backgroundColor:"#4361ee",borderRadius:14,paddingVertical:13,paddingHorizontal:30,alignItems:"center",marginTop:10,marginBottom:18,shadowColor:"#4361ee",shadowOffset:{width:0,height:6},shadowOpacity:.3,shadowRadius:15,elevation:4},btnSecondary:{backgroundColor:"#6c757d",borderRadius:14,paddingVertical:13,paddingHorizontal:30,alignItems:"center",marginTop:10,marginBottom:18,marginLeft:0},btnText:{color:"#fff",fontWeight:"700",fontSize:17,textAlign:"center",letterSpacing:.5},sectionTitle:{fontSize:20,fontWeight:"700",color:"#1b1b1b",borderLeftWidth:5,borderLeftColor:"#4895ef",paddingLeft:12,marginBottom:18,marginTop:10,userSelect:"none",backgroundColor:"rgba(232, 240, 254, 0.7)",borderRadius:8},noUsersText:{textAlign:"center",color:"#888",marginTop:10,fontSize:16,fontStyle:"italic"},userRow:{backgroundColor:"rgba(248,250,252,0.95)",borderRadius:12,padding:16,marginBottom:10,borderWidth:1,borderColor:"#e0e6f1",flexDirection:"row",justifyContent:"space-between",alignItems:"center",shadowColor:"#4361ee",shadowOffset:{width:0,height:2},shadowOpacity:.08,shadowRadius:6,elevation:2},userActions:{flexDirection:"row",alignItems:"center",justifyContent:"flex-end",flexShrink:0,flexWrap:"wrap",gap:6},editBtn:{backgroundColor:"#4895ef",borderRadius:8,paddingVertical:6,paddingHorizontal:14,marginRight:0,marginBottom:4},deleteBtn:{backgroundColor:"#ef476f",borderRadius:8,paddingVertical:6,paddingHorizontal:14,marginBottom:4},actionText:{color:"#fff",fontWeight:"700",fontSize:14,textAlign:"center"},userText:{fontSize:15,color:"#263159",fontWeight:"500",marginBottom:2},block:{padding:20,textAlign:"center",fontSize:18,color:"red"}});function k(){const e=(0,h.useNavigation)();return(0,s.jsx)(y.default,{source:o(133),style:I.bg,resizeMode:"cover",children:(0,s.jsx)(p.default,{contentContainerStyle:I.scrollContainer,children:(0,s.jsxs)(i.default,{style:I.dashboardContainer,children:[(0,s.jsx)(i.default,{style:I.logoContainer,children:(0,s.jsx)(g.default,{name:"school",size:80,color:"#3498db"})}),(0,s.jsx)(n.default,{style:I.sectionTitle,children:"Panel de Candidato"}),(0,s.jsxs)(i.default,{style:I.profileSection,children:[(0,s.jsx)(n.default,{style:I.welcomeText,children:"Bienvenido a la Aplicaci\xf3n"}),(0,s.jsxs)(i.default,{style:I.roleBadge,children:[(0,s.jsx)(g.default,{name:"shield-checkmark",size:18,color:"#fff",style:{marginRight:6}}),(0,s.jsx)(n.default,{style:I.roleBadgeText,children:"Candidato"})]})]}),(0,s.jsx)(i.default,{style:I.actionsContainer,children:[{label:"Editar Perfil",icon:"person",color:"#34495e",screen:"Perfil"},{label:"Lista de Candidaturas",icon:"document-text-outline",color:"#2980b9",screen:"Lista de candidaturas"},{label:"Resultados",icon:"bar-chart-outline",color:"#e74c3c",screen:"Resulados"}].map((t=>(0,s.jsxs)(x.default,{style:[I.actionCard,{shadowColor:t.color},{cursor:"pointer"}],activeOpacity:.85,onPress:()=>e.navigate(t.screen),children:[(0,s.jsx)(i.default,{style:[I.iconCircle,{backgroundColor:t.color+"22"}],children:(0,s.jsx)(g.default,{name:t.icon,size:28,color:t.color})}),(0,s.jsx)(n.default,{style:[I.actionLabel,{color:t.color}],children:t.label})]},t.label)))})]})})})}const I=l.default.create({bg:{flex:1,width:"100%",height:"100%"},scrollContainer:{flexGrow:1,justifyContent:"center",alignItems:"center",paddingVertical:32},dashboardContainer:{width:"98%",maxWidth:500,backgroundColor:"#fff",padding:32,borderRadius:20,borderWidth:1,borderColor:"rgba(0,0,0,0.04)",shadowColor:"#2c3e50",shadowOffset:{width:0,height:8},shadowOpacity:.1,shadowRadius:24,elevation:10,alignItems:"center"},logoContainer:{backgroundColor:"#ecf0f1",borderRadius:60,width:110,height:110,alignItems:"center",justifyContent:"center",marginBottom:12,borderWidth:2,borderColor:"#fff",shadowColor:"#3498db",shadowOpacity:.1,shadowRadius:8,elevation:4},sectionTitle:{color:"#2c3e50",fontWeight:"700",fontSize:26,marginBottom:14,letterSpacing:.5,borderBottomWidth:2,borderBottomColor:"#f0f0f0",paddingBottom:6,width:"100%",textAlign:"center"},profileSection:{backgroundColor:"#f8fafc",borderRadius:10,padding:18,marginBottom:24,borderWidth:1,borderColor:"rgba(0,0,0,0.04)",alignItems:"center",width:"100%"},welcomeText:{color:"#2c3e50",fontWeight:"600",fontSize:18,marginBottom:8,textAlign:"center"},roleBadge:{flexDirection:"row",backgroundColor:"#3498db",borderRadius:50,paddingVertical:5,paddingHorizontal:18,alignSelf:"center",alignItems:"center",marginTop:4},roleBadgeText:{color:"#fff",fontWeight:"500",fontSize:15,letterSpacing:.5},actionsContainer:{width:"100%",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-between",gap:18},actionCard:{backgroundColor:"#f7fafd",borderRadius:14,paddingVertical:22,paddingHorizontal:18,alignItems:"center",marginBottom:14,width:"47%",minWidth:150,shadowOffset:{width:0,height:4},shadowOpacity:.13,shadowRadius:8,elevation:3,borderWidth:1,borderColor:"#e3e9f7"},iconCircle:{width:48,height:48,borderRadius:24,backgroundColor:"#eaf1fb",alignItems:"center",justifyContent:"center",marginBottom:10},actionLabel:{fontWeight:"bold",fontSize:16,textAlign:"center",letterSpacing:.5}});function O(){const e=(0,h.useNavigation)();console.log("Usuario actual:",d.auth.user);return(0,s.jsx)(y.default,{source:o(133),style:W.bg,resizeMode:"cover",children:(0,s.jsx)(p.default,{contentContainerStyle:W.scrollContainer,children:(0,s.jsxs)(i.default,{style:W.dashboardContainer,children:[(0,s.jsx)(i.default,{style:W.logoContainer,children:(0,s.jsx)(g.default,{name:"school",size:80,color:"#3498db"})}),(0,s.jsx)(n.default,{style:W.sectionTitle,children:"Panel de Votante"}),(0,s.jsxs)(i.default,{style:W.profileSection,children:[(0,s.jsx)(n.default,{style:W.welcomeText,children:"Bienvenido a la Aplicaci\xf3n"}),(0,s.jsxs)(i.default,{style:W.roleBadge,children:[(0,s.jsx)(g.default,{name:"shield-checkmark",size:18,color:"#fff",style:{marginRight:6}}),(0,s.jsx)(n.default,{style:W.roleBadgeText,children:"Votante"})]})]}),(0,s.jsx)(i.default,{style:W.actionsContainer,children:[{label:"Editar Perfil",icon:"person",color:"#34495e",screen:"Perfil"},{label:"Resultados",icon:"bar-chart-outline",color:"#e74c3c",screen:"Resulados"},{label:"Realizar Votaci\xf3n",icon:"checkmark-circle-outline",color:"#27ae60",screen:"Realizar Votacion"}].map((t=>(0,s.jsxs)(x.default,{style:[W.actionCard,{shadowColor:t.color},{cursor:"pointer"}],activeOpacity:.85,onPress:()=>e.navigate(t.screen),children:[(0,s.jsx)(i.default,{style:[W.iconCircle,{backgroundColor:t.color+"22"}],children:(0,s.jsx)(g.default,{name:t.icon,size:28,color:t.color})}),(0,s.jsx)(n.default,{style:[W.actionLabel,{color:t.color}],children:t.label})]},t.label)))})]})})})}const W=l.default.create({bg:{flex:1,width:"100%",height:"100%"},scrollContainer:{flexGrow:1,justifyContent:"center",alignItems:"center",paddingVertical:32},dashboardContainer:{width:"98%",maxWidth:500,backgroundColor:"#fff",padding:32,borderRadius:20,borderWidth:1,borderColor:"rgba(0,0,0,0.04)",shadowColor:"#2c3e50",shadowOffset:{width:0,height:8},shadowOpacity:.1,shadowRadius:24,elevation:10,alignItems:"center"},logoContainer:{backgroundColor:"#ecf0f1",borderRadius:60,width:110,height:110,alignItems:"center",justifyContent:"center",marginBottom:12,borderWidth:2,borderColor:"#fff",shadowColor:"#3498db",shadowOpacity:.1,shadowRadius:8,elevation:4},sectionTitle:{color:"#2c3e50",fontWeight:"700",fontSize:26,marginBottom:14,letterSpacing:.5,borderBottomWidth:2,borderBottomColor:"#f0f0f0",paddingBottom:6,width:"100%",textAlign:"center"},profileSection:{backgroundColor:"#f8fafc",borderRadius:10,padding:18,marginBottom:24,borderWidth:1,borderColor:"rgba(0,0,0,0.04)",alignItems:"center",width:"100%"},welcomeText:{color:"#2c3e50",fontWeight:"600",fontSize:18,marginBottom:8,textAlign:"center"},roleBadge:{flexDirection:"row",backgroundColor:"#3498db",borderRadius:50,paddingVertical:5,paddingHorizontal:18,alignSelf:"center",alignItems:"center",marginTop:4},roleBadgeText:{color:"#fff",fontWeight:"500",fontSize:15,letterSpacing:.5},actionsContainer:{width:"100%",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-between",gap:18},actionCard:{backgroundColor:"#f7fafd",borderRadius:14,paddingVertical:22,paddingHorizontal:18,alignItems:"center",marginBottom:14,width:"47%",minWidth:150,shadowOffset:{width:0,height:4},shadowOpacity:.13,shadowRadius:8,elevation:3,borderWidth:1,borderColor:"#e3e9f7"},iconCircle:{width:48,height:48,borderRadius:24,backgroundColor:"#eaf1fb",alignItems:"center",justifyContent:"center",marginBottom:10},actionLabel:{fontWeight:"bold",fontSize:16,textAlign:"center",letterSpacing:.5}});function B(){const e=(0,h.useNavigation)();return(0,s.jsx)(y.default,{source:o(133),style:P.bg,resizeMode:"cover",children:(0,s.jsx)(p.default,{contentContainerStyle:P.scrollContainer,children:(0,s.jsxs)(i.default,{style:P.dashboardContainer,children:[(0,s.jsx)(i.default,{style:P.logoContainer,children:(0,s.jsx)(g.default,{name:"school",size:80,color:"#3498db"})}),(0,s.jsx)(n.default,{style:P.sectionTitle,children:"Panel de Administrativo"}),(0,s.jsxs)(i.default,{style:P.profileSection,children:[(0,s.jsx)(n.default,{style:P.welcomeText,children:"Bienvenido a la Aplicaci\xf3n"}),(0,s.jsxs)(i.default,{style:P.roleBadge,children:[(0,s.jsx)(g.default,{name:"shield-checkmark",size:18,color:"#fff",style:{marginRight:6}}),(0,s.jsx)(n.default,{style:P.roleBadgeText,children:"Administrativo"})]})]}),(0,s.jsx)(i.default,{style:P.actionsContainer,children:[{label:"Editar Perfil",icon:"person",color:"#34495e",screen:"Perfil"},{label:"Resultados",icon:"bar-chart-outline",color:"#e74c3c",screen:"Resulados"},{label:"Ver Candidaturas",icon:"people",color:"#8e44ad",screen:"Lista de candidaturas"}].map((t=>(0,s.jsxs)(x.default,{style:[P.actionCard,{shadowColor:t.color},{cursor:"pointer"}],activeOpacity:.85,onPress:()=>e.navigate(t.screen),children:[(0,s.jsx)(i.default,{style:[P.iconCircle,{backgroundColor:t.color+"22"}],children:(0,s.jsx)(g.default,{name:t.icon,size:28,color:t.color})}),(0,s.jsx)(n.default,{style:[P.actionLabel,{color:t.color}],children:t.label})]},t.label)))})]})})})}const P=l.default.create({bg:{flex:1,width:"100%",height:"100%"},scrollContainer:{flexGrow:1,justifyContent:"center",alignItems:"center",paddingVertical:32,paddingHorizontal:12},dashboardContainer:{width:"100%",maxWidth:420,backgroundColor:"#fff",padding:10,borderRadius:20,borderWidth:1,borderColor:"rgba(0,0,0,0.04)",shadowColor:"#2c3e50",shadowOffset:{width:0,height:8},shadowOpacity:.1,shadowRadius:24,elevation:10,alignItems:"center"},actionsContainer:{width:"100%",flexDirection:"column",gap:18,alignItems:"center"},actionCard:{backgroundColor:"#f7fafd",borderRadius:14,paddingVertical:24,paddingHorizontal:18,alignItems:"center",marginBottom:18,width:"100%",alignSelf:"center",shadowOffset:{width:0,height:4},shadowOpacity:.13,shadowRadius:8,elevation:3,borderWidth:1,borderColor:"#e3e9f7"},logoContainer:{backgroundColor:"#ecf0f1",borderRadius:60,width:110,height:110,alignItems:"center",justifyContent:"center",marginBottom:12,borderWidth:2,borderColor:"#fff",shadowColor:"#3498db",shadowOpacity:.1,shadowRadius:8,elevation:4},sectionTitle:{color:"#2c3e50",fontWeight:"700",fontSize:26,marginBottom:14,letterSpacing:.5,borderBottomWidth:2,borderBottomColor:"#f0f0f0",paddingBottom:6,width:"100%",textAlign:"center"},profileSection:{backgroundColor:"#f8fafc",borderRadius:10,padding:18,marginBottom:24,borderWidth:1,borderColor:"rgba(0,0,0,0.04)",alignItems:"center",width:"100%"},welcomeText:{color:"#2c3e50",fontWeight:"600",fontSize:18,marginBottom:8,textAlign:"center"},roleBadge:{flexDirection:"row",backgroundColor:"#3498db",borderRadius:50,paddingVertical:5,paddingHorizontal:18,alignSelf:"center",alignItems:"center",marginTop:4},roleBadgeText:{color:"#fff",fontWeight:"500",fontSize:15,letterSpacing:.5},iconCircle:{width:48,height:48,borderRadius:24,backgroundColor:"#eaf1fb",alignItems:"center",justifyContent:"center",marginBottom:10},actionLabel:{fontWeight:"bold",fontSize:16,textAlign:"center",letterSpacing:.5}});function V(){const e=(0,h.useNavigation)();return(0,s.jsx)(y.default,{source:o(133),style:A.bg,resizeMode:"cover",children:(0,s.jsx)(p.default,{contentContainerStyle:A.scrollContainer,children:(0,s.jsxs)(i.default,{style:A.dashboardContainer,children:[(0,s.jsx)(i.default,{style:A.logoContainer,children:(0,s.jsx)(g.default,{name:"school",size:80,color:"#3498db"})}),(0,s.jsx)(n.default,{style:A.sectionTitle,children:"Panel de Administraci\xf3n"}),(0,s.jsxs)(i.default,{style:A.profileSection,children:[(0,s.jsx)(n.default,{style:A.welcomeText,children:"Bienvenido a la Aplicaci\xf3n"}),(0,s.jsxs)(i.default,{style:A.roleBadge,children:[(0,s.jsx)(g.default,{name:"shield-checkmark",size:18,color:"#fff",style:{marginRight:6}}),(0,s.jsx)(n.default,{style:A.roleBadgeText,children:"Administrador"})]})]}),(0,s.jsx)(i.default,{style:A.actionsContainer,children:[{label:"Gestionar Usuarios",icon:"people",color:"#2980b9",screen:"Usuarios"},{label:"Crear Elecci\xf3n",icon:"checkbox-outline",color:"#27ae60",screen:"Crear Eleccion"},{label:"Asignar Candidato",icon:"add-circle-outline",color:"#f39c12",screen:"Asignar Candidato"},{label:"Lista de Candidaturas",icon:"list-outline",color:"#8e44ad",screen:"Lista de candidaturas"},{label:"Resultados",icon:"bar-chart-outline",color:"#e74c3c",screen:"Resulados"},{label:"Editar Perfil",icon:"person",color:"#34495e",screen:"Perfil"}].map(((t,o)=>(0,s.jsxs)(x.default,{style:[A.actionCard,{shadowColor:t.color},{cursor:"pointer"}],activeOpacity:.85,onPress:()=>e.navigate(t.screen),children:[(0,s.jsx)(i.default,{style:[A.iconCircle,{backgroundColor:t.color+"22"}],children:(0,s.jsx)(g.default,{name:t.icon,size:28,color:t.color})}),(0,s.jsx)(n.default,{style:[A.actionLabel,{color:t.color}],children:t.label})]},t.label)))})]})})})}const A=l.default.create({bg:{flex:1,width:"100%",height:"100%"},scrollContainer:{flexGrow:1,justifyContent:"center",alignItems:"center",paddingVertical:32},dashboardContainer:{width:"98%",maxWidth:500,backgroundColor:"#fff",padding:32,borderRadius:20,borderWidth:1,borderColor:"rgba(0,0,0,0.04)",shadowColor:"#2c3e50",shadowOffset:{width:0,height:8},shadowOpacity:.1,shadowRadius:24,elevation:10,alignItems:"center"},logoContainer:{backgroundColor:"#ecf0f1",borderRadius:60,width:110,height:110,alignItems:"center",justifyContent:"center",marginBottom:12,borderWidth:2,borderColor:"#fff",shadowColor:"#3498db",shadowOpacity:.1,shadowRadius:8,elevation:4},sectionTitle:{color:"#2c3e50",fontWeight:"700",fontSize:26,marginBottom:14,letterSpacing:.5,borderBottomWidth:2,borderBottomColor:"#f0f0f0",paddingBottom:6,width:"100%",textAlign:"center"},profileSection:{backgroundColor:"#f8fafc",borderRadius:10,padding:18,marginBottom:24,borderWidth:1,borderColor:"rgba(0,0,0,0.04)",alignItems:"center",width:"100%"},welcomeText:{color:"#2c3e50",fontWeight:"600",fontSize:18,marginBottom:8,textAlign:"center"},roleBadge:{flexDirection:"row",backgroundColor:"#3498db",borderRadius:50,paddingVertical:5,paddingHorizontal:18,alignSelf:"center",alignItems:"center",marginTop:4},roleBadgeText:{color:"#fff",fontWeight:"500",fontSize:15,letterSpacing:.5},actionsContainer:{width:"100%",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-between",gap:18},actionCard:{backgroundColor:"#f7fafd",borderRadius:14,paddingVertical:22,paddingHorizontal:18,alignItems:"center",marginBottom:14,width:"47%",minWidth:150,shadowOffset:{width:0,height:4},shadowOpacity:.13,shadowRadius:8,elevation:3,borderWidth:1,borderColor:"#e3e9f7"},iconCircle:{width:48,height:48,borderRadius:24,backgroundColor:"#eaf1fb",alignItems:"center",justifyContent:"center",marginBottom:10},actionLabel:{fontWeight:"bold",fontSize:16,textAlign:"center",letterSpacing:.5}});var E=o(8382);o(9162);function N(){const[e,t]=(0,r.useState)(""),[a,l]=(0,r.useState)(""),[c,f]=(0,r.useState)("facultad"),[u,h]=(0,r.useState)(null),[g,j]=(0,r.useState)(null),[C,S]=(0,r.useState)("programada"),[v,T]=(0,r.useState)(!1),[z,R]=(0,r.useState)(!1),[k,I]=(0,r.useState)(""),[O,W]=(0,r.useState)(""),B=(0,r.useState)(new E.default.Value(0))[0],P=(0,r.useState)(new E.default.Value(0))[0];return(0,s.jsx)(y.default,{source:o(133),style:L.bg,resizeMode:"cover",children:(0,s.jsx)(p.default,{contentContainerStyle:L.container,children:(0,s.jsxs)(i.default,{style:L.card,children:[(0,s.jsx)(n.default,{style:L.title,children:"\ud83d\uddf3\ufe0f Crear Elecci\xf3n"}),O?(0,s.jsx)(E.default.View,{style:[L.errorMsg,{opacity:P}],children:(0,s.jsx)(n.default,{style:L.errorText,children:O})}):null,k?(0,s.jsx)(E.default.View,{style:[L.successMsg,{opacity:B}],children:(0,s.jsx)(n.default,{style:L.successText,children:k})}):null,(0,s.jsx)(n.default,{style:L.label,children:"Nombre *"}),(0,s.jsx)(m.default,{style:L.input,value:e,onChangeText:t,placeholder:"Nombre de la elecci\xf3n",placeholderTextColor:"#b0b6c1"}),(0,s.jsx)(n.default,{style:L.label,children:"Descripci\xf3n"}),(0,s.jsx)(m.default,{style:[L.input,{height:80}],value:a,onChangeText:l,placeholder:"Descripci\xf3n",placeholderTextColor:"#b0b6c1",multiline:!0}),(0,s.jsx)(n.default,{style:L.label,children:"Tipo de Representaci\xf3n *"}),(0,s.jsx)(i.default,{style:L.pickerContainer,children:(0,s.jsxs)(w.Picker,{selectedValue:c,onValueChange:f,style:L.picker,dropdownIconColor:"#4361ee",children:[(0,s.jsx)(w.Picker.Item,{label:"Facultad",value:"facultad"}),(0,s.jsx)(w.Picker.Item,{label:"Semestre",value:"semestre"}),(0,s.jsx)(w.Picker.Item,{label:"Comit\xe9",value:"comite"})]})}),(0,s.jsx)(n.default,{style:L.label,children:"Fecha de Inicio *"}),(0,s.jsx)("input",{type:"datetime-local",style:Object.assign({},L.input,{padding:10,fontSize:15}),value:u?u.toISOString().slice(0,16):"",onChange:e=>h(e.target.value?new Date(e.target.value):null)}),(0,s.jsx)(n.default,{style:L.label,children:"Fecha de Fin *"}),(0,s.jsx)("input",{type:"datetime-local",style:Object.assign({},L.input,{padding:10,fontSize:15}),value:g?g.toISOString().slice(0,16):"",onChange:e=>j(e.target.value?new Date(e.target.value):null)}),(0,s.jsx)(n.default,{style:L.label,children:"Estado *"}),(0,s.jsx)(i.default,{style:L.pickerContainer,children:(0,s.jsxs)(w.Picker,{selectedValue:C,onValueChange:S,style:L.picker,dropdownIconColor:"#4361ee",children:[(0,s.jsx)(w.Picker.Item,{label:"Activa",value:"activa"}),(0,s.jsx)(w.Picker.Item,{label:"Finalizada",value:"finalizada"}),(0,s.jsx)(w.Picker.Item,{label:"Programada",value:"programada"})]})}),(0,s.jsx)(x.default,{style:L.btnPrimary,onPress:async()=>{if(!e||!c||!u||!g||!C)return W("Completa todos los campos obligatorios"),void E.default.timing(P,{toValue:1,duration:400,useNativeDriver:!0}).start((()=>{setTimeout((()=>{E.default.timing(P,{toValue:0,duration:400,useNativeDriver:!0}).start((()=>W("")))}),2500)}));try{const{error:o}=await d.from("eleccions").insert([{nombre:e,descripcion:a,tipo_representacion:c,fecha_inicio:u.toISOString(),fecha_fin:g.toISOString(),estado:C}]);o?b.default.alert("Error",o.message):((e=>{I(e),E.default.timing(B,{toValue:1,duration:400,useNativeDriver:!0}).start((()=>{setTimeout((()=>{E.default.timing(B,{toValue:0,duration:400,useNativeDriver:!0}).start((()=>I("")))}),2500)}))})("\u2705 \xa1Elecci\xf3n registrada exitosamente!"),t(""),l(""),f("facultad"),h(null),j(null),S("programada"))}catch(o){b.default.alert("Error",o.message||"No se pudo crear la elecci\xf3n")}},children:(0,s.jsx)(n.default,{style:L.btnText,children:"Registrar Elecci\xf3n"})})]})})})}const L=l.default.create({bg:{flex:1,width:"100%",height:"100%"},container:{padding:24,flexGrow:1,justifyContent:"center",alignItems:"center"},card:{backgroundColor:"rgba(255,255,255,0.97)",borderRadius:22,padding:32,maxWidth:500,width:"100%",alignSelf:"center",shadowColor:"#4361ee",shadowOffset:{width:0,height:10},shadowOpacity:.15,shadowRadius:24,elevation:8,marginTop:40,marginBottom:40,borderWidth:1,borderColor:"#e0e6f1"},title:{fontSize:30,fontWeight:"800",color:"#3434e6",marginBottom:20,textAlign:"center",letterSpacing:.5,textShadowColor:"rgba(52,52,230,0.08)",textShadowOffset:{width:0,height:2},textShadowRadius:6},label:{fontWeight:"700",fontSize:16,color:"#343a40",marginBottom:6,marginTop:14,letterSpacing:.2},input:{backgroundColor:"#f4f6fb",padding:15,borderRadius:12,marginBottom:10,borderWidth:1.5,borderColor:"#ced4da",fontSize:16,color:"#212529",shadowColor:"#eaf1fb",shadowOffset:{width:0,height:2},shadowOpacity:.08,shadowRadius:4,elevation:1},pickerContainer:{backgroundColor:"#f4f6fb",borderRadius:12,borderWidth:1.5,borderColor:"#ced4da",marginBottom:10,overflow:"hidden"},picker:{width:"100%",height:48,color:"#263159"},btnPrimary:{backgroundColor:"#4361ee",borderRadius:16,paddingVertical:15,paddingHorizontal:30,alignItems:"center",marginTop:22,shadowColor:"#4361ee",shadowOffset:{width:0,height:8},shadowOpacity:.3,shadowRadius:18,elevation:5},btnText:{color:"#fff",fontWeight:"800",fontSize:18,textAlign:"center",letterSpacing:.5},successMsg:{backgroundColor:"#d1f7c4",borderRadius:10,padding:14,marginBottom:18,alignItems:"center",borderWidth:1,borderColor:"#b6e6a7"},successText:{color:"#218838",fontWeight:"700",fontSize:16,textAlign:"center"},errorMsg:{backgroundColor:"#ffe0e0",borderRadius:10,padding:14,marginBottom:18,alignItems:"center",borderWidth:1,borderColor:"#ffb3b3"},errorText:{color:"#d90429",fontWeight:"700",fontSize:16,textAlign:"center"}});var D=o(932),_=o(530);function H(){const[e,t]=(0,r.useState)([]),[a,l]=(0,r.useState)(!0),[c,f]=(0,r.useState)(null),[u,h]=(0,r.useState)({}),[p,j]=(0,r.useState)(!1),[C,S]=(0,r.useState)(!1),[v,T]=(0,r.useState)(""),z=(0,r.useState)(new E.default.Value(0))[0],R=async()=>{l(!0);const{data:e,error:o}=await d.from("eleccions").select("*").order("fecha_inicio",{ascending:!1});o||t(e||[]),l(!1)};(0,r.useEffect)((()=>{R()}),[]);const k=e=>{T(e),E.default.timing(z,{toValue:1,duration:400,useNativeDriver:!0}).start((()=>{setTimeout((()=>{E.default.timing(z,{toValue:0,duration:400,useNativeDriver:!0}).start((()=>T("")))}),2e3)}))},I=async e=>{b.default.alert("Intentando eliminar elecci\xf3n con id:",String(e));const{error:t}=await d.from("eleccions").delete().eq("id",e);t?b.default.alert("Error",t.message):(k("Elecci\xf3n eliminada"),f(null),h({}),R())},O=async()=>{if(!u.nombre||!u.tipo_representacion||!u.fecha_inicio||!u.fecha_fin||!u.estado)return void b.default.alert("Completa todos los campos obligatorios");const e=u.fecha_inicio.getFullYear()+"-"+String(u.fecha_inicio.getMonth()+1).padStart(2,"0")+"-"+String(u.fecha_inicio.getDate()).padStart(2,"0")+" "+String(u.fecha_inicio.getHours()).padStart(2,"0")+":"+String(u.fecha_inicio.getMinutes()).padStart(2,"0")+":00",t=u.fecha_fin.getFullYear()+"-"+String(u.fecha_fin.getMonth()+1).padStart(2,"0")+"-"+String(u.fecha_fin.getDate()).padStart(2,"0")+" "+String(u.fecha_fin.getHours()).padStart(2,"0")+":"+String(u.fecha_fin.getMinutes()).padStart(2,"0")+":00",{error:o}=await d.from("eleccions").update({nombre:u.nombre,descripcion:u.descripcion,tipo_representacion:u.tipo_representacion,fecha_inicio:e,fecha_fin:t,estado:u.estado}).eq("id",u.id);o?b.default.alert("Error",o.message):(f(null),h({}),R(),k("\u2705 \xa1Elecci\xf3n actualizada!"))};return a?(0,s.jsx)(i.default,{style:M.centered,children:(0,s.jsx)(_.default,{size:"large",color:"#4361ee"})}):(0,s.jsx)(y.default,{source:o(133),style:M.bg,resizeMode:"cover",children:(0,s.jsxs)(i.default,{style:M.container,children:[(0,s.jsx)(n.default,{style:M.title,children:"\ud83d\uddf3\ufe0f Elecciones Disponibles"}),v?(0,s.jsx)(E.default.View,{style:[M.successMsg,{opacity:z}],children:(0,s.jsx)(n.default,{style:M.successText,children:v})}):null,(0,s.jsx)(D.default,{data:e,keyExtractor:e=>e.id.toString(),renderItem:({item:e})=>c===e.id?(0,s.jsxs)(i.default,{style:M.cardEdit,children:[(0,s.jsxs)(n.default,{style:M.nombre,children:["Editar: ",e.nombre]}),(0,s.jsx)(m.default,{style:M.input,value:u.nombre,onChangeText:e=>h(Object.assign({},u,{nombre:e})),placeholder:"Nombre"}),(0,s.jsx)(m.default,{style:[M.input,{height:60}],value:u.descripcion,onChangeText:e=>h(Object.assign({},u,{descripcion:e})),placeholder:"Descripci\xf3n",multiline:!0}),(0,s.jsx)(i.default,{style:M.pickerContainer,children:(0,s.jsxs)(w.Picker,{selectedValue:u.tipo_representacion,onValueChange:e=>h(Object.assign({},u,{tipo_representacion:e})),style:M.picker,dropdownIconColor:"#4361ee",children:[(0,s.jsx)(w.Picker.Item,{label:"Facultad",value:"facultad"}),(0,s.jsx)(w.Picker.Item,{label:"Semestre",value:"semestre"}),(0,s.jsx)(w.Picker.Item,{label:"Comit\xe9",value:"comite"})]})}),(0,s.jsx)(n.default,{style:M.label,children:"Fecha de Inicio *"}),(0,s.jsx)("input",{type:"datetime-local",style:Object.assign({},M.input,{padding:10,fontSize:15}),value:u.fecha_inicio?new Date(u.fecha_inicio).toISOString().slice(0,16):"",onChange:e=>h(Object.assign({},u,{fecha_inicio:e.target.value?new Date(e.target.value):null}))}),(0,s.jsx)(n.default,{style:M.label,children:"Fecha de Fin *"}),(0,s.jsx)("input",{type:"datetime-local",style:Object.assign({},M.input,{padding:10,fontSize:15}),value:u.fecha_fin?new Date(u.fecha_fin).toISOString().slice(0,16):"",onChange:e=>h(Object.assign({},u,{fecha_fin:e.target.value?new Date(e.target.value):null}))}),(0,s.jsx)(i.default,{style:M.pickerContainer,children:(0,s.jsxs)(w.Picker,{selectedValue:u.estado,onValueChange:e=>h(Object.assign({},u,{estado:e})),style:M.picker,dropdownIconColor:"#4361ee",children:[(0,s.jsx)(w.Picker.Item,{label:"Activa",value:"activa"}),(0,s.jsx)(w.Picker.Item,{label:"Finalizada",value:"finalizada"}),(0,s.jsx)(w.Picker.Item,{label:"Programada",value:"programada"})]})}),(0,s.jsxs)(i.default,{style:M.actions,children:[(0,s.jsxs)(x.default,{style:M.btnEdit,onPress:O,children:[(0,s.jsx)(g.default,{name:"save-outline",size:18,color:"#fff"}),(0,s.jsx)(n.default,{style:M.btnText,children:"Guardar"})]}),(0,s.jsxs)(x.default,{style:M.btnDelete,onPress:()=>{f(null),h({})},children:[(0,s.jsx)(g.default,{name:"close-outline",size:18,color:"#fff"}),(0,s.jsx)(n.default,{style:M.btnText,children:"Cancelar"})]})]})]}):(0,s.jsxs)(i.default,{style:M.card,children:[(0,s.jsxs)(i.default,{style:M.headerRow,children:[(0,s.jsx)(g.default,{name:"checkbox-outline",size:28,color:"#343a40",style:{marginRight:8}}),(0,s.jsx)(n.default,{style:M.nombre,children:e.nombre})]}),(0,s.jsx)(n.default,{style:M.descripcion,children:e.descripcion}),(0,s.jsxs)(i.default,{style:M.infoRow,children:[(0,s.jsx)(g.default,{name:"people-outline",size:18,color:"#4361ee"}),(0,s.jsxs)(n.default,{style:M.info,children:["Tipo: ",e.tipo_representacion]})]}),(0,s.jsxs)(i.default,{style:M.infoRow,children:[(0,s.jsx)(g.default,{name:"calendar-outline",size:18,color:"#4361ee"}),(0,s.jsxs)(n.default,{style:M.info,children:["Inicio: ",new Date(e.fecha_inicio).toLocaleString()]})]}),(0,s.jsxs)(i.default,{style:M.infoRow,children:[(0,s.jsx)(g.default,{name:"calendar-outline",size:18,color:"#ef476f"}),(0,s.jsxs)(n.default,{style:M.info,children:["Fin: ",new Date(e.fecha_fin).toLocaleString()]})]}),(0,s.jsxs)(i.default,{style:M.infoRow,children:[(0,s.jsx)(g.default,{name:"information-circle-outline",size:18,color:"#ffd60a"}),(0,s.jsxs)(n.default,{style:M.info,children:["Estado: ",e.estado]})]}),(0,s.jsxs)(i.default,{style:M.actions,children:[(0,s.jsxs)(x.default,{style:M.btnEdit,onPress:()=>{return f((t=e).id),void h(Object.assign({},t,{fecha_inicio:new Date(t.fecha_inicio),fecha_fin:new Date(t.fecha_fin)}));var t},children:[(0,s.jsx)(g.default,{name:"create-outline",size:18,color:"#fff"}),(0,s.jsx)(n.default,{style:M.btnText,children:"Editar"})]}),(0,s.jsxs)(x.default,{style:M.btnDelete,onPress:()=>{return t=e.id,void(window.confirm("\xbfEst\xe1s seguro de que deseas eliminar esta elecci\xf3n?")&&I(t));var t},children:[(0,s.jsx)(g.default,{name:"trash-outline",size:18,color:"#fff"}),(0,s.jsx)(n.default,{style:M.btnText,children:"Eliminar"})]})]})]}),numColumns:2,ListEmptyComponent:(0,s.jsx)(n.default,{style:M.emptyText,children:"No hay elecciones registradas."}),contentContainerStyle:M.flatListContent})]})})}const M=l.default.create({bg:{flex:1,width:"100%",height:"100%"},container:{flex:1,padding:18,justifyContent:"center",alignItems:"center"},flatListContent:{paddingBottom:30,paddingHorizontal:4,alignItems:"flex-start"},title:{fontSize:30,fontWeight:"800",color:"#3434e6",marginBottom:24,textAlign:"center",letterSpacing:.5,textShadowColor:"rgba(52,52,230,0.08)",textShadowOffset:{width:0,height:2},textShadowRadius:6},card:{backgroundColor:"rgba(255,255,255,0.97)",borderRadius:18,padding:20,marginBottom:16,marginHorizontal:4,shadowColor:"#4361ee",shadowOffset:{width:0,height:8},shadowOpacity:.13,shadowRadius:18,elevation:7,borderLeftWidth:7,borderLeftColor:"#4361ee",width:"47%",minWidth:200,maxWidth:340},cardEdit:{backgroundColor:"rgba(232,240,254,0.98)",borderRadius:18,padding:20,marginBottom:16,marginHorizontal:4,borderLeftWidth:7,borderLeftColor:"#ffd60a",shadowColor:"#ffd60a",shadowOffset:{width:0,height:8},shadowOpacity:.13,shadowRadius:18,elevation:7,width:"47%",minWidth:200,maxWidth:340},headerRow:{flexDirection:"row",alignItems:"center",marginBottom:8},nombre:{fontSize:21,fontWeight:"800",color:"#343a40",flex:1,flexWrap:"wrap"},descripcion:{color:"#555",marginBottom:10,fontStyle:"italic",fontSize:15},infoRow:{flexDirection:"row",alignItems:"center",marginBottom:3},info:{color:"#4361ee",fontSize:15,marginLeft:7,fontWeight:"600"},actions:{flexDirection:"row",justifyContent:"flex-end",marginTop:16,gap:8},btnEdit:{backgroundColor:"#4361ee",borderRadius:8,paddingVertical:10,paddingHorizontal:22,marginRight:6,flexDirection:"row",alignItems:"center",shadowColor:"#4361ee",shadowOffset:{width:0,height:2},shadowOpacity:.13,shadowRadius:6,elevation:2},btnDelete:{backgroundColor:"#ef476f",borderRadius:8,paddingVertical:10,paddingHorizontal:22,flexDirection:"row",alignItems:"center",shadowColor:"#ef476f",shadowOffset:{width:0,height:2},shadowOpacity:.13,shadowRadius:6,elevation:2},btnText:{color:"#fff",fontWeight:"700",fontSize:16,marginLeft:8},centered:{flex:1,justifyContent:"center",alignItems:"center"},input:{backgroundColor:"#f4f6fb",padding:14,borderRadius:10,marginBottom:10,borderWidth:1.5,borderColor:"#ced4da",fontSize:16,color:"#212529",shadowColor:"#eaf1fb",shadowOffset:{width:0,height:2},shadowOpacity:.08,shadowRadius:4,elevation:1},pickerContainer:{backgroundColor:"#f4f6fb",borderRadius:10,borderWidth:1.5,borderColor:"#ced4da",marginBottom:10,overflow:"hidden"},picker:{width:"100%",height:48,color:"#263159"},label:{fontWeight:"700",fontSize:15,color:"#343a40",marginBottom:4,marginTop:10},successMsg:{backgroundColor:"#d1f7c4",borderRadius:10,padding:14,marginBottom:18,alignItems:"center",borderWidth:1,borderColor:"#b6e6a7"},successText:{color:"#218838",fontWeight:"700",fontSize:16,textAlign:"center"},emptyText:{textAlign:"center",marginTop:40,color:"#888",fontSize:16,fontStyle:"italic"}});var F=o(9149);function q(){const[e,t]=(0,r.useState)([]),[a,l]=(0,r.useState)([]),[c,f]=(0,r.useState)([]),[u,h]=(0,r.useState)(""),[j,C]=(0,r.useState)(""),[S,v]=(0,r.useState)(""),[T,z]=(0,r.useState)(!0),[R,k]=(0,r.useState)(!1),[I,O]=(0,r.useState)(null),W=async()=>{z(!0);const{data:e}=await d.from("users").select("id, username, role").eq("role","CANDIDATO"),{data:o}=await d.from("eleccions").select("id, nombre"),{data:a}=await d.from("candidaturas").select("id, propuesta, userid, eleccionid");t(e||[]),l(o||[]),f(a||[]),z(!1)};(0,r.useEffect)((()=>{W()}),[]);const B=()=>{O(null),v(""),h(""),C("")};return T?(0,s.jsx)(i.default,{style:U.centered,children:(0,s.jsx)(_.default,{size:"large",color:"#0d6efd"})}):(0,s.jsx)(y.default,{source:o(133),style:U.bg,resizeMode:"cover",children:(0,s.jsx)(p.default,{contentContainerStyle:{flexGrow:1},children:(0,s.jsxs)(i.default,{style:U.container,children:[(0,s.jsx)(n.default,{style:U.title,children:I?"Editar Candidatura":"Asignar Candidato a Elecci\xf3n"}),(0,s.jsxs)(i.default,{style:U.formCard,children:[(0,s.jsx)(n.default,{style:U.label,children:"Selecciona un candidato:"}),(0,s.jsx)(i.default,{style:U.pickerContainer,children:(0,s.jsxs)(w.Picker,{selectedValue:u,onValueChange:h,style:U.picker,enabled:!I,children:[(0,s.jsx)(w.Picker.Item,{label:"Selecciona un candidato",value:""}),e.map((e=>(0,s.jsx)(w.Picker.Item,{label:e.username,value:e.id.toString()},e.id)))]})}),(0,s.jsx)(n.default,{style:U.label,children:"Selecciona una elecci\xf3n:"}),(0,s.jsx)(i.default,{style:U.pickerContainer,children:(0,s.jsxs)(w.Picker,{selectedValue:j,onValueChange:C,style:U.picker,enabled:!I,children:[(0,s.jsx)(w.Picker.Item,{label:"Selecciona una elecci\xf3n",value:""}),a.map((e=>(0,s.jsx)(w.Picker.Item,{label:e.nombre,value:e.id.toString()},e.id)))]})}),(0,s.jsx)(n.default,{style:U.label,children:"Propuesta del candidato:"}),(0,s.jsx)(m.default,{style:U.input,placeholder:"Escribe la propuesta",value:S,onChangeText:v,multiline:!0}),(0,s.jsxs)(i.default,{style:{flexDirection:"row",marginTop:8},children:[(0,s.jsxs)(x.default,{style:[U.btnAgregar,{backgroundColor:I?"#198754":"#0d6efd"}],onPress:async()=>{if(!u||!j||!S.trim())return void b.default.alert("Todos los campos son obligatorios");const e=Number(u),t=Number(j);if(isNaN(e)||isNaN(t)||e<=0||t<=0)b.default.alert("Selecciona un candidato y una elecci\xf3n v\xe1lidos");else if(k(!0),I){const{error:e}=await d.from("candidaturas").update({propuesta:S}).eq("id",I);k(!1),e?b.default.alert("Error","No se pudo actualizar la candidatura."):(b.default.alert("\xc9xito","Candidatura actualizada"),B(),W())}else{const{data:o}=await d.from("candidaturas").select("id").eq("userid",e).eq("eleccionid",t).maybeSingle();if(o)return k(!1),void b.default.alert("Este candidato ya est\xe1 asignado a esta elecci\xf3n");const a={propuesta:S,userid:e,eleccionid:t},{error:r}=await d.from("candidaturas").insert([a]);k(!1),r?b.default.alert("Error","No se pudo registrar la candidatura. Intenta nuevamente."):(b.default.alert("\xc9xito","Candidato asignado a la elecci\xf3n"),B(),W())}},disabled:R,children:[I?(0,s.jsx)(F.default,{name:"check",size:20,color:"#fff"}):(0,s.jsx)(g.default,{name:"person-add-outline",size:20,color:"#fff"}),(0,s.jsx)(n.default,{style:U.btnAgregarText,children:R?I?"Actualizando...":"Agregando...":I?"Actualizar":"Asignar candidato"})]}),I&&(0,s.jsxs)(x.default,{style:[U.btnAgregar,{backgroundColor:"#dc3545",marginLeft:8}],onPress:B,children:[(0,s.jsx)(F.default,{name:"close",size:20,color:"#fff"}),(0,s.jsx)(n.default,{style:U.btnAgregarText,children:"Cancelar"})]})]})]}),(0,s.jsx)(n.default,{style:[U.title,{fontSize:20,marginTop:24}],children:"Candidaturas registradas"}),0===c.length?(0,s.jsx)(n.default,{style:{textAlign:"center",marginTop:12,color:"#888"},children:"No hay candidaturas registradas."}):c.map((t=>{const o=e.find((e=>e.id===t.userid)),r=a.find((e=>e.id===t.eleccionid));return(0,s.jsxs)(i.default,{style:U.candidaturaCard,children:[(0,s.jsxs)(n.default,{style:{color:"#495057",fontSize:13,marginBottom:4},children:["Candidato:"," ",(0,s.jsx)(n.default,{style:{fontWeight:"bold"},children:o?o.username:"Desconocido"})," ","| Elecci\xf3n:"," ",(0,s.jsx)(n.default,{style:{fontWeight:"bold"},children:r?r.nombre:"Desconocida"})]}),(0,s.jsx)(n.default,{style:{fontWeight:"bold",color:"#0d6efd"},children:"Propuesta:"}),(0,s.jsx)(n.default,{children:t.propuesta}),(0,s.jsxs)(i.default,{style:{flexDirection:"row",marginTop:8,justifyContent:"flex-end"},children:[(0,s.jsx)(x.default,{style:[U.actionBtn,{backgroundColor:"#0d6efd"}],onPress:()=>(e=>{O(e.id),h(e.userid.toString()),C(e.eleccionid.toString()),v(e.propuesta)})(t),children:(0,s.jsx)(F.default,{name:"edit",size:18,color:"#fff"})}),(0,s.jsx)(x.default,{style:[U.actionBtn,{backgroundColor:"#dc3545",marginLeft:8}],onPress:()=>(async e=>{if(window.confirm("\xbfEst\xe1s seguro de que deseas eliminar esta candidatura?")){const{error:t}=await d.from("candidaturas").delete().eq("id",e);t?b.default.alert("Error","No se pudo eliminar la candidatura."):(b.default.alert("Eliminado","Candidatura eliminada correctamente."),W())}})(t.id),children:(0,s.jsx)(F.default,{name:"delete",size:18,color:"#fff"})})]})]},t.id)}))]})})})}const U=l.default.create({bg:{flex:1,width:"100%",height:"100%"},container:{padding:18,backgroundColor:"transparent"},formCard:{backgroundColor:"#fff",borderRadius:12,padding:18,marginBottom:18,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.07,shadowRadius:6,elevation:3},title:{fontSize:24,fontWeight:"700",color:"#0d6efd",marginBottom:18,textAlign:"center"},label:{fontWeight:"700",fontSize:15,color:"#2c3e50",marginBottom:6,marginTop:8},pickerContainer:{backgroundColor:"#f8f9fa",borderRadius:8,borderWidth:1.2,borderColor:"#ced4da",marginBottom:12,overflow:"hidden"},picker:{width:"100%",height:48,color:"#2c3e50"},input:{backgroundColor:"#f8f9fa",padding:12,borderRadius:8,borderWidth:1.2,borderColor:"#ced4da",fontSize:15,color:"#2c3e50",marginBottom:16,marginTop:4,minHeight:60,textAlignVertical:"top"},btnAgregar:{backgroundColor:"#0d6efd",borderRadius:8,paddingVertical:12,paddingHorizontal:18,flexDirection:"row",alignItems:"center",justifyContent:"center",shadowColor:"#0d6efd",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4,elevation:2,marginTop:10},btnAgregarText:{color:"#fff",fontWeight:"700",fontSize:16,marginLeft:8},candidaturaCard:{backgroundColor:"#fff",borderRadius:10,padding:14,marginBottom:10,shadowColor:"#0d6efd",shadowOffset:{width:0,height:1},shadowOpacity:.06,shadowRadius:2,elevation:1},actionBtn:{padding:8,borderRadius:6},centered:{flex:1,justifyContent:"center",alignItems:"center"}});var G=o(8264),J=o(5708);function Y(){const[e,t]=(0,r.useState)([]),[a,l]=(0,r.useState)(!0),[c,f]=(0,r.useState)(!1),[u,m]=(0,r.useState)(null),[w,C]=(0,r.useState)([]),[S,v]=(0,r.useState)(null),[T,z]=(0,r.useState)(!1),[R,k]=(0,r.useState)(!1),[I,O]=(0,r.useState)(null),W=(0,h.useNavigation)();(0,r.useEffect)((()=>{j.default.getItem("usuario").then((e=>{if(e){const t=JSON.parse(e);O(t.id),P(t.id)}})),B()}),[]);const B=async()=>{l(!0);const{data:e,error:o}=await d.from("eleccions").select("*").eq("estado","activa").order("fecha_inicio",{ascending:!1});o||t(e||[]),l(!1)},P=async e=>{const{data:t}=await d.from("votos").select("id").eq("userid",e).maybeSingle();k(!!t)},V=async e=>{"activa"===e.estado?(m(e),v(null),R||await(async e=>{const{data:t,error:o}=await d.from("candidaturas").select("id, propuesta, userid, users(username)").eq("eleccionid",e);C(o?[]:t||[])})(e.id),f(!0)):b.default.alert("No disponible","Solo puedes votar en elecciones activas.")};return a?(0,s.jsxs)(i.default,{style:$.center,children:[(0,s.jsx)(_.default,{size:"large",color:"#4361ee"}),(0,s.jsx)(n.default,{style:$.loadingText,children:"Cargando elecciones..."})]}):(0,s.jsx)(y.default,{source:o(133),style:$.bg,resizeMode:"cover",children:(0,s.jsx)(p.default,{contentContainerStyle:$.scrollContainer,children:(0,s.jsxs)(i.default,{style:$.dashboardContainer,children:[(0,s.jsx)(i.default,{style:$.logoContainer,children:(0,s.jsx)(g.default,{name:"school",size:64,color:"#3498db"})}),(0,s.jsx)(n.default,{style:$.title,children:"Votaciones Disponibles"}),(0,s.jsxs)(n.default,{style:$.subtitle,children:["Total elecciones: ",e.length]}),(0,s.jsx)(D.default,{data:e,keyExtractor:e=>e.id.toString(),renderItem:({item:e})=>(0,s.jsx)(x.default,{onPress:()=>V(e),style:[$.touchable,R&&{opacity:.6}],disabled:R,children:(0,s.jsxs)(i.default,{style:$.card,children:[(0,s.jsxs)(n.default,{style:$.eleccion,children:[(0,s.jsx)(g.default,{name:"balloon-outline",size:20,color:"#3a0ca3"})," ",e.nombre||"Sin nombre"]}),(0,s.jsx)(n.default,{style:$.descripcion,children:e.descripcion||"Sin descripci\xf3n"}),(0,s.jsxs)(n.default,{style:$.info,children:["Tipo: ",(0,s.jsx)(n.default,{style:$.infoValue,children:e.tipo_representacion})]}),(0,s.jsxs)(n.default,{style:$.info,children:["Estado: ",(0,s.jsx)(n.default,{style:$.infoValue,children:e.estado})]})]})}),ItemSeparatorComponent:()=>(0,s.jsx)(i.default,{style:$.separator}),ListEmptyComponent:(0,s.jsx)(n.default,{style:$.emptyText,children:"No hay elecciones disponibles."}),style:{width:"100%"}}),(0,s.jsx)(G.default,{visible:c,transparent:!0,animationType:"fade",onRequestClose:()=>f(!1),children:(0,s.jsx)(i.default,{style:$.modalOverlay,children:(0,s.jsxs)(i.default,{style:$.modalContent,children:[(0,s.jsxs)(n.default,{style:$.modalTitle,children:[(0,s.jsx)(g.default,{name:"balloon-outline",size:22,color:"#4361ee"})," Votar en: ",(0,s.jsx)(n.default,{style:{color:"#4361ee"},children:u?.nombre})]}),R?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.default,{style:{color:"#e74c3c",fontWeight:"bold",marginVertical:20,textAlign:"center"},children:"Ya has votado en una elecci\xf3n. Solo puedes votar una vez."}),(0,s.jsx)(i.default,{style:$.modalBtnRow,children:(0,s.jsx)(x.default,{style:$.btnCancel,onPress:()=>{f(!1),W.goBack()},children:(0,s.jsx)(n.default,{style:$.btnCancelText,children:"Volver al panel"})})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.default,{style:$.modalSubtitle,children:"Selecciona una candidatura:"}),(0,s.jsxs)(p.default,{style:{maxHeight:200,width:"100%",marginTop:10},children:[0===w.length&&(0,s.jsx)(n.default,{style:{color:"#888",textAlign:"center"},children:"No hay candidaturas disponibles."}),w.map((e=>(0,s.jsxs)(J.default,{onPress:()=>v(e),style:[$.candidaturaItem,S?.id===e.id&&$.candidaturaItemSelected],children:[(0,s.jsx)(n.default,{style:{color:S?.id===e.id?"#fff":"#22223b",fontWeight:"bold"},children:e.users?.username||"Candidato desconocido"}),(0,s.jsx)(n.default,{style:{color:S?.id===e.id?"#fff":"#555",fontSize:13,marginTop:2},children:e.propuesta})]},e.id)))]}),(0,s.jsxs)(i.default,{style:$.modalBtnRow,children:[(0,s.jsx)(x.default,{style:$.btnCancel,onPress:()=>f(!1),children:(0,s.jsx)(n.default,{style:$.btnCancelText,children:"Cancelar"})}),(0,s.jsx)(x.default,{style:[$.btnVotar,(!S||T)&&{opacity:.6}],onPress:async()=>{if(R)return;if(!I)return void b.default.alert("Error","No se encontr\xf3 el usuario en sesi\xf3n");if(!u||!u.id)return void b.default.alert("Error","No se seleccion\xf3 una elecci\xf3n");if(!S||!S.id)return void b.default.alert("Error","Debes seleccionar una candidatura");z(!0);const{error:e}=await d.from("votos").insert([{userid:I,eleccionid:u.id,candidaturaid:S.id}]);z(!1),e?b.default.alert("Error","No se pudo guardar el voto"):(b.default.alert("\xc9xito","\xa1Voto guardado!"),k(!0),f(!1),v(null),m(null))},disabled:!S||T,children:(0,s.jsx)(n.default,{style:$.btnVotarText,children:T?"Guardando...":"Votar"})})]})]})]})})})]})})})}const $=l.default.create({bg:{flex:1,width:"100%",height:"100%"},scrollContainer:{flexGrow:1,justifyContent:"center",alignItems:"center",paddingVertical:32},dashboardContainer:{width:"98%",maxWidth:500,backgroundColor:"#fff",padding:28,borderRadius:20,borderWidth:1,borderColor:"rgba(0,0,0,0.04)",shadowColor:"#2c3e50",shadowOffset:{width:0,height:8},shadowOpacity:.1,shadowRadius:24,elevation:10,alignItems:"center"},logoContainer:{backgroundColor:"#ecf0f1",borderRadius:60,width:90,height:90,alignItems:"center",justifyContent:"center",marginBottom:10,borderWidth:2,borderColor:"#fff",shadowColor:"#3498db",shadowOpacity:.1,shadowRadius:8,elevation:4},title:{color:"#3a0ca3",fontWeight:"700",fontSize:24,marginBottom:6,letterSpacing:.5,textAlign:"center"},subtitle:{fontSize:15,color:"#666",marginBottom:18,textAlign:"center"},touchable:{borderRadius:14,overflow:"hidden",marginBottom:8},card:{backgroundColor:"#f7fafd",padding:18,borderRadius:14,shadowColor:"#4361ee",shadowOpacity:.08,shadowOffset:{width:0,height:2},shadowRadius:6,elevation:2,borderLeftWidth:5,borderLeftColor:"#4361ee"},eleccion:{fontSize:18,fontWeight:"bold",color:"#3a0ca3",marginBottom:4},descripcion:{fontSize:15,color:"#22223b",marginBottom:4},info:{fontSize:14,color:"#555",marginTop:2},infoValue:{fontWeight:"bold",color:"#4361ee"},separator:{height:10},emptyText:{fontSize:16,color:"#888",textAlign:"center",marginTop:20},modalOverlay:{flex:1,backgroundColor:"rgba(0,0,0,0.25)",justifyContent:"center",alignItems:"center"},modalContent:{backgroundColor:"#fff",padding:26,borderRadius:18,width:"90%",alignItems:"center",shadowColor:"#4361ee",shadowOpacity:.13,shadowOffset:{width:0,height:4},shadowRadius:12,elevation:8},modalTitle:{fontWeight:"bold",fontSize:20,marginBottom:10,color:"#3a0ca3",textAlign:"center"},modalSubtitle:{fontSize:15,color:"#22223b",marginBottom:8,textAlign:"center"},candidaturaItem:{padding:12,borderRadius:8,backgroundColor:"#eaf1ff",marginBottom:8,alignItems:"flex-start",borderLeftWidth:4,borderLeftColor:"#3a0ca3"},candidaturaItemSelected:{backgroundColor:"#4361ee",borderLeftColor:"#3a0ca3"},modalBtnRow:{flexDirection:"row",gap:14,marginTop:18,width:"100%",justifyContent:"center"},btnCancel:{backgroundColor:"#e3e7ef",paddingVertical:12,paddingHorizontal:28,borderRadius:10,alignItems:"center",minWidth:100},btnCancelText:{color:"#3a0ca3",fontWeight:"bold",fontSize:16},btnVotar:{backgroundColor:"#4361ee",paddingVertical:12,paddingHorizontal:28,borderRadius:10,alignItems:"center",minWidth:100},btnVotarText:{color:"#fff",fontWeight:"bold",fontSize:16},center:{flex:1,justifyContent:"center",alignItems:"center"},loadingText:{marginTop:10,fontSize:16,color:"#555"}});function X(){const[e,t]=(0,r.useState)([]),[a,l]=(0,r.useState)(!0),[c,f]=(0,r.useState)(!1),[u,h]=(0,r.useState)(null);(0,r.useEffect)((()=>{g()}),[]);const g=async()=>{l(!0);const{data:e,error:o}=await d.from("votos").select("\n                eleccionid,\n                eleccions(nombre),\n                candidaturaid,\n                candidaturas(propuesta, users(username))\n            ");if(!o&&e){const o=e.reduce(((e,t)=>{const o=`${t.eleccionid}-${t.candidaturaid}`;return e[o]?e[o].count+=1:e[o]=Object.assign({},t,{count:1}),e}),{});t(Object.values(o))}l(!1)},m=e.reduce(((e,t)=>{const o=t.eleccionid;return e[o]||(e[o]={nombre:t.eleccions?.nombre,resultados:[]}),e[o].resultados.push(t),e}),{}),b=e.reduce(((e,t)=>e+t.count),0),j=Object.keys(m).length,w=e.length;return a?(0,s.jsxs)(i.default,{style:Q.center,children:[(0,s.jsx)(_.default,{size:"large",color:"#4361ee"}),(0,s.jsx)(n.default,{style:Q.loadingText,children:"Cargando resultados..."})]}):(0,s.jsx)(y.default,{source:o(133),style:Q.bg,resizeMode:"cover",children:(0,s.jsxs)(i.default,{style:Q.overlay,children:[(0,s.jsx)(n.default,{style:Q.title,children:"Resultados de Votaciones"}),(0,s.jsxs)(i.default,{style:Q.statsContainer,children:[(0,s.jsxs)(n.default,{style:Q.statsText,children:["Total de votos: ",(0,s.jsx)(n.default,{style:Q.statsValue,children:b})]}),(0,s.jsxs)(n.default,{style:Q.statsText,children:["Total de elecciones: ",(0,s.jsx)(n.default,{style:Q.statsValue,children:j})]}),(0,s.jsxs)(n.default,{style:Q.statsText,children:["Total de candidaturas: ",(0,s.jsx)(n.default,{style:Q.statsValue,children:w})]})]}),0===Object.values(m).length&&(0,s.jsx)(n.default,{style:Q.emptyText,children:"No hay votos registrados."}),(0,s.jsx)(p.default,{showsVerticalScrollIndicator:!1,children:Object.values(m).map(((e,t)=>{const o=e.resultados.reduce(((e,t)=>e+t.count),0);return(0,s.jsxs)(x.default,{style:Q.eleccionCard,onPress:()=>(e=>{h(e),f(!0)})(e),activeOpacity:.93,children:[(0,s.jsx)(n.default,{style:Q.eleccionNombre,children:e.nombre}),(0,s.jsx)(i.default,{style:Q.barChartContainer,children:e.resultados.map(((e,t)=>{const a=o>0?e.count/o*100:0,r=b>0?e.count/b*100:0;return(0,s.jsxs)(i.default,{style:{marginBottom:18},children:[(0,s.jsxs)(i.default,{style:Q.barRow,children:[(0,s.jsx)(i.default,{style:Q.barLabelContainer,children:(0,s.jsx)(n.default,{style:Q.barLabel,children:e.candidaturas?.users?.username||"Candidato desconocido"})}),(0,s.jsx)(i.default,{style:Q.barWrapper,children:(0,s.jsx)(i.default,{style:[Q.bar,{width:`${a}%`,backgroundColor:Z[t%Z.length]}]})})]}),(0,s.jsxs)(i.default,{style:Q.barInfoRow,children:[(0,s.jsxs)(n.default,{style:Q.barValue,children:[e.count," votos"]}),(0,s.jsxs)(n.default,{style:Q.barPercent,children:[a.toFixed(1),"% elecci\xf3n / ",r.toFixed(1),"% total"]})]})]},e.candidaturaid)}))}),(0,s.jsxs)(n.default,{style:Q.totalVotosSmall,children:["Total de votos: ",o]})]},t)}))}),(0,s.jsx)(G.default,{visible:c,transparent:!0,animationType:"fade",onRequestClose:()=>f(!1),children:(0,s.jsx)(i.default,{style:Q.modalOverlay,children:(0,s.jsxs)(i.default,{style:Q.modalContent,children:[(0,s.jsxs)(n.default,{style:Q.modalTitle,children:["Estad\xedsticas de: ",(0,s.jsx)(n.default,{style:{color:"#4361ee"},children:u?.nombre})]}),u&&(0,s.jsxs)(s.Fragment,{children:[(()=>{const e=u.resultados.reduce(((e,t)=>e+t.count),0);return u.resultados.map(((t,o)=>{const a=e>0?(t.count/e*100).toFixed(2):0,r=b>0?(t.count/b*100).toFixed(2):0;return(0,s.jsxs)(i.default,{style:Q.modalResult,children:[(0,s.jsx)(n.default,{style:Q.modalUsername,children:t.candidaturas?.users?.username||"Candidato desconocido"}),(0,s.jsxs)(n.default,{style:Q.modalPropuesta,children:["\u201c",t.candidaturas?.propuesta,"\u201d"]}),(0,s.jsx)(i.default,{style:Q.progressBarContainer,children:(0,s.jsx)(i.default,{style:[Q.progressBar,{width:`${Number(a)}%`,backgroundColor:Z[o%Z.length]}]})}),(0,s.jsxs)(n.default,{style:Q.modalVotos,children:[t.count," votos (",a,"% elecci\xf3n / ",r,"% total)"]})]},t.candidaturaid)}))})(),(0,s.jsxs)(n.default,{style:Q.totalVotos,children:["Total de votos: ",u.resultados.reduce(((e,t)=>e+t.count),0)]})]}),(0,s.jsx)(x.default,{style:Q.btnCerrar,onPress:()=>f(!1),children:(0,s.jsx)(n.default,{style:Q.btnCerrarText,children:"Cerrar"})})]})})})]})})}const Z=["#4361ee","#3a86ff","#ffbe0b","#fb5607","#ff006e","#8338ec","#3a0ca3"],Q=l.default.create({bg:{flex:1,width:"100%",height:"100%"},overlay:{flex:1,backgroundColor:"rgba(255,255,255,0.93)",padding:18},statsContainer:{flexDirection:"row",justifyContent:"space-around",marginBottom:18,marginTop:8,backgroundColor:"#eaf1ff",borderRadius:10,padding:10},statsText:{fontSize:15,color:"#22223b",fontWeight:"bold"},statsValue:{color:"#4361ee",fontWeight:"bold",fontSize:16},center:{flex:1,justifyContent:"center",alignItems:"center"},loadingText:{marginTop:10,fontSize:16,color:"#555"},title:{fontSize:28,fontWeight:"bold",marginBottom:18,color:"#4361ee",textAlign:"center",letterSpacing:.5},eleccionCard:{marginBottom:22,padding:20,backgroundColor:"#f7faff",borderRadius:16,shadowColor:"#4361ee",shadowOpacity:.1,shadowOffset:{width:0,height:2},shadowRadius:8,elevation:2,borderLeftWidth:6,borderLeftColor:"#4361ee"},eleccionNombre:{fontSize:20,fontWeight:"bold",marginBottom:10,color:"#4361ee",letterSpacing:.2},barChartContainer:{marginBottom:10,marginTop:8},barRow:{flexDirection:"row",alignItems:"center",marginBottom:2},barLabelContainer:{width:120,marginRight:8},barLabel:{fontSize:15,color:"#22223b",fontWeight:"bold"},barWrapper:{flex:1,flexDirection:"row",alignItems:"center"},barInfoRow:{flexDirection:"row",justifyContent:"space-between",width:"100%",marginTop:2,marginBottom:8},bar:{height:22,borderRadius:8,marginRight:8},barValue:{fontSize:15,color:"#22223b",fontWeight:"bold"},barPercent:{fontSize:12,color:"#4361ee",fontWeight:"bold"},totalVotosSmall:{marginTop:8,fontWeight:"bold",fontSize:15,color:"#3a0ca3",textAlign:"right"},emptyText:{fontSize:16,color:"#999",textAlign:"center",marginTop:20},modalOverlay:{flex:1,backgroundColor:"rgba(0,0,0,0.25)",justifyContent:"center",alignItems:"center"},modalContent:{backgroundColor:"#fff",padding:28,borderRadius:18,width:"90%",alignItems:"center",shadowColor:"#4361ee",shadowOpacity:.13,shadowOffset:{width:0,height:4},shadowRadius:12,elevation:8},modalTitle:{fontWeight:"bold",fontSize:22,marginBottom:16,color:"#3a0ca3",textAlign:"center"},modalResult:{marginBottom:16,alignItems:"center",width:"100%"},modalUsername:{fontWeight:"bold",fontSize:16,color:"#22223b"},modalPropuesta:{fontSize:14,fontStyle:"italic",color:"#444",textAlign:"center",marginBottom:4},modalVotos:{fontSize:15,color:"#4361ee",marginTop:4,fontWeight:"bold"},totalVotos:{marginTop:18,fontWeight:"bold",fontSize:16,color:"#3a0ca3"},btnCerrar:{marginTop:18,backgroundColor:"#4361ee",paddingVertical:12,paddingHorizontal:36,borderRadius:10,alignItems:"center",minWidth:120},btnCerrarText:{color:"#fff",fontWeight:"bold",fontSize:16,letterSpacing:.5},progressBarContainer:{width:"100%",height:14,backgroundColor:"#eaf1ff",borderRadius:6,marginTop:6,marginBottom:2,overflow:"hidden"},progressBar:{height:"100%",borderRadius:6}});function K(){const[e,t]=(0,r.useState)([]),[a,l]=(0,r.useState)(!0),[c,f]=(0,r.useState)(!1),[u,h]=(0,r.useState)(null),[m,b]=(0,r.useState)([]);(0,r.useEffect)((()=>{j()}),[]);const j=async()=>{l(!0);const{data:e,error:o}=await d.from("eleccions").select("*").order("fecha_inicio",{ascending:!1});o||t(e||[]),l(!1)},w=async e=>{h(e),await(async e=>{const{data:t,error:o}=await d.from("candidaturas").select("id, propuesta, users(username)").eq("eleccionid",e);b(o?[]:t||[])})(e.id),f(!0)};return a?(0,s.jsxs)(i.default,{style:ee.center,children:[(0,s.jsx)(_.default,{size:"large",color:"#4f8cff"}),(0,s.jsx)(n.default,{style:ee.loadingText,children:"Cargando elecciones..."})]}):(0,s.jsx)(y.default,{source:o(133),style:ee.bg,resizeMode:"cover",children:(0,s.jsxs)(i.default,{style:ee.container,children:[(0,s.jsx)(n.default,{style:ee.title,children:"Candidaturas por Elecci\xf3n"}),(0,s.jsxs)(n.default,{style:ee.subtitle,children:["Total elecciones: ",e.length]}),(0,s.jsx)(D.default,{data:e,keyExtractor:e=>e.id.toString(),renderItem:({item:e})=>(0,s.jsx)(x.default,{onPress:()=>w(e),style:ee.touchable,children:(0,s.jsxs)(i.default,{style:ee.card,children:[(0,s.jsxs)(i.default,{style:ee.cardHeader,children:[(0,s.jsx)(g.default,{name:"school",size:22,color:"#4f8cff",style:{marginRight:8}}),(0,s.jsx)(n.default,{style:ee.eleccion,children:e.nombre||"Sin nombre"})]}),(0,s.jsxs)(n.default,{style:ee.descripcion,children:[(0,s.jsx)(g.default,{name:"document-text-outline",size:16,color:"#4f8cff"})," ",e.descripcion||"Sin descripci\xf3n"]}),(0,s.jsxs)(i.default,{style:ee.infoRow,children:[(0,s.jsx)(g.default,{name:"people-outline",size:16,color:"#4f8cff"}),(0,s.jsx)(n.default,{style:ee.infoLabel,children:"Tipo:"}),(0,s.jsx)(n.default,{style:ee.infoValue,children:e.tipo_representacion})]}),(0,s.jsxs)(i.default,{style:ee.infoRow,children:[(0,s.jsx)(g.default,{name:"checkmark-circle-outline",size:16,color:"ACTIVA"===e.estado?"#27ae60":"#888"}),(0,s.jsx)(n.default,{style:ee.infoLabel,children:"Estado:"}),(0,s.jsx)(n.default,{style:[ee.infoValue,{color:"ACTIVA"===e.estado?"#27ae60":"#888"}],children:e.estado})]})]})}),ItemSeparatorComponent:()=>(0,s.jsx)(i.default,{style:ee.separator}),ListEmptyComponent:(0,s.jsx)(n.default,{style:ee.emptyText,children:"No hay elecciones disponibles."})}),(0,s.jsx)(G.default,{visible:c,transparent:!0,animationType:"slide",onRequestClose:()=>f(!1),children:(0,s.jsx)(i.default,{style:ee.modalOverlay,children:(0,s.jsxs)(i.default,{style:ee.modalContent,children:[(0,s.jsxs)(n.default,{style:ee.modalTitle,children:[(0,s.jsx)(g.default,{name:"people-circle-outline",size:22,color:"#4f8cff"})," ","Candidaturas de: ",(0,s.jsx)(n.default,{style:{color:"#4f8cff"},children:u?.nombre})]}),(0,s.jsxs)(p.default,{style:{maxHeight:250,width:"100%",marginTop:10},children:[0===m.length&&(0,s.jsx)(n.default,{style:{color:"#888",textAlign:"center"},children:"No hay candidaturas registradas."}),m.map((e=>(0,s.jsxs)(i.default,{style:ee.candidaturaItem,children:[(0,s.jsxs)(i.default,{style:{flexDirection:"row",alignItems:"center",marginBottom:2},children:[(0,s.jsx)(g.default,{name:"person",size:16,color:"#4f8cff"}),(0,s.jsx)(n.default,{style:ee.candidatoNombre,children:e.userprofiles?.nombres?`${e.userprofiles.nombres} ${e.userprofiles.apellidos}`:e.users?.username?e.users.username:"Candidato desconocido"})]}),(0,s.jsxs)(i.default,{style:{flexDirection:"row",alignItems:"center"},children:[(0,s.jsx)(g.default,{name:"bulb-outline",size:14,color:"#4f8cff"}),(0,s.jsx)(n.default,{style:ee.candidatoPropuesta,children:e.propuesta})]})]},e.id)))]}),(0,s.jsx)(i.default,{style:{marginTop:16},children:(0,s.jsx)(J.default,{onPress:()=>f(!1),style:ee.btnCerrar,children:(0,s.jsx)(n.default,{style:ee.btnCerrarText,children:"Cerrar"})})})]})})})]})})}const ee=l.default.create({bg:{flex:1,width:"100%",height:"100%"},container:{flex:1,padding:20,backgroundColor:"rgba(255,255,255,0.96)",borderTopLeftRadius:28,borderTopRightRadius:28,marginTop:10,shadowColor:"#4f8cff",shadowOpacity:.08,shadowOffset:{width:0,height:4},shadowRadius:12,elevation:4},center:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"rgba(255,255,255,0.96)"},loadingText:{marginTop:10,fontSize:16,color:"#555"},title:{fontSize:28,fontWeight:"bold",marginBottom:8,color:"#4f8cff",textAlign:"center",letterSpacing:.5},subtitle:{fontSize:16,color:"#666",marginBottom:18,textAlign:"center"},touchable:{borderRadius:16,overflow:"hidden"},card:{backgroundColor:"#f7faff",padding:20,borderRadius:16,shadowColor:"#4f8cff",shadowOpacity:.1,shadowOffset:{width:0,height:2},shadowRadius:8,elevation:2,borderLeftWidth:6,borderLeftColor:"#4f8cff",marginBottom:2},cardHeader:{flexDirection:"row",alignItems:"center",marginBottom:8},eleccion:{fontSize:20,fontWeight:"bold",color:"#4f8cff"},descripcion:{fontSize:15,color:"#333",marginTop:2,marginBottom:2},infoRow:{flexDirection:"row",alignItems:"center",marginTop:2,marginBottom:2},infoLabel:{fontSize:14,color:"#555",marginLeft:6,fontWeight:"600"},infoValue:{fontSize:14,color:"#222",marginLeft:4,fontWeight:"bold"},estado:{fontSize:15,marginTop:4,color:"#198754"},separator:{height:16},emptyText:{fontSize:16,color:"#888",textAlign:"center",marginTop:20},modalOverlay:{flex:1,backgroundColor:"rgba(0,0,0,0.25)",justifyContent:"center",alignItems:"center"},modalContent:{backgroundColor:"#fff",padding:28,borderRadius:18,width:"92%",alignItems:"center",shadowColor:"#4f8cff",shadowOpacity:.13,shadowOffset:{width:0,height:4},shadowRadius:12,elevation:8},modalTitle:{fontWeight:"bold",fontSize:22,marginBottom:12,color:"#4f8cff",textAlign:"center"},candidaturaItem:{padding:14,borderRadius:12,backgroundColor:"#eaf1ff",marginBottom:12,alignItems:"flex-start",borderLeftWidth:4,borderLeftColor:"#4f8cff",width:"100%"},candidatoNombre:{color:"#263159",fontWeight:"bold",fontSize:15,marginLeft:6},candidatoPropuesta:{color:"#222",fontSize:14,marginLeft:6,marginTop:2},btnCerrar:{padding:14,backgroundColor:"#4f8cff",borderRadius:10,alignItems:"center",minWidth:120,marginTop:8},btnCerrarText:{color:"#fff",fontWeight:"bold",fontSize:16,letterSpacing:.5}}),te=(0,u.createBottomTabNavigator)();function oe({onLogout:e}){const[t,o]=(0,r.useState)(null);(0,r.useEffect)((()=>{(async()=>{let e;if(e=localStorage.getItem("usuario"),e){const t=JSON.parse(e);o(t.role)}})()}),[]);const a=()=>(0,s.jsxs)(x.default,{onPress:async()=>{window.confirm("\xbfDeseas salir de la aplicaci\xf3n?")&&(localStorage.removeItem("usuario"),sessionStorage.setItem("logoutMessage","\ud83d\udeaa Has cerrado sesi\xf3n exitosamente"),window.location.reload())},style:{marginRight:18,backgroundColor:"#e74c3c",paddingVertical:6,paddingHorizontal:14,borderRadius:22,flexDirection:"row",alignItems:"center",shadowColor:"#e74c3c",shadowOpacity:.18,shadowRadius:6,elevation:4},children:[(0,s.jsx)(g.default,{name:"log-out-outline",size:18,color:"#fff",style:{marginRight:6}}),(0,s.jsx)(n.default,{style:{color:"#fff",fontWeight:"bold",fontSize:15},children:"Salir"})]});return(0,s.jsx)(h.NavigationContainer,{children:(0,s.jsxs)(te.Navigator,{screenOptions:({route:e})=>({tabBarIcon:({color:t,size:o})=>{let a="help";return"Panel"===e.name?a="home":"Productos"===e.name?a="pricetags":"Perfil"===e.name?a="person":"Inventario"===e.name?a="cube":"Usuarios"===e.name?a="people":"Crear Eleccion"===e.name?a="checkbox-outline":"Lista Elecciones"===e.name?a="create-outline":"Asignar Candidato"===e.name?a="add-circle-outline":"Realizar Votacion"===e.name?a="checkmark-circle-outline":"Lista de candidaturas"===e.name?a="list-outline":"Resulados"===e.name&&(a="bar-chart-outline"),(0,s.jsx)(g.default,{name:a,size:o,color:t})},headerRight:a}),children:["ADMIN"===t&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(te.Screen,{name:"Panel",component:V}),(0,s.jsx)(te.Screen,{name:"Usuarios",component:z}),(0,s.jsx)(te.Screen,{name:"Crear Eleccion",component:N}),(0,s.jsx)(te.Screen,{name:"Lista Elecciones",component:H}),(0,s.jsx)(te.Screen,{name:"Asignar Candidato",component:q}),(0,s.jsx)(te.Screen,{name:"Lista de candidaturas",component:K})]}),"CANDIDATO"===t&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(te.Screen,{name:"Panel",component:k}),(0,s.jsx)(te.Screen,{name:"Lista de candidaturas",component:K})]}),"VOTANTE"===t&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(te.Screen,{name:"Panel",component:O}),(0,s.jsx)(te.Screen,{name:"Realizar Votacion",component:Y})]}),"ADMINISTRATIVO"===t&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(te.Screen,{name:"Panel",component:B}),(0,s.jsx)(te.Screen,{name:"Lista de candidaturas",component:K})]}),(0,s.jsx)(te.Screen,{name:"Resulados",component:X}),(0,s.jsx)(te.Screen,{name:"Perfil",component:C})]})})}function ae({navigation:e}){const[t,o]=(0,r.useState)(""),[a,l]=(0,r.useState)(""),[c,f]=(0,r.useState)(!1);return(0,s.jsx)(i.default,{style:re.bg,children:(0,s.jsx)(v.default,{style:{flex:1,justifyContent:"center",alignItems:"center"},behavior:void 0,children:(0,s.jsxs)(i.default,{style:re.loginContainer,children:[(0,s.jsx)(n.default,{style:re.title,children:"\ud83d\udd10 Iniciar Sesi\xf3n"}),(0,s.jsx)(m.default,{placeholder:"Usuario",style:re.input,value:t,onChangeText:o,autoCapitalize:"none",placeholderTextColor:"#888"}),(0,s.jsx)(m.default,{placeholder:"Contrase\xf1a",style:re.input,value:a,onChangeText:l,secureTextEntry:!0,placeholderTextColor:"#888"}),(0,s.jsx)(x.default,{style:[re.button,c&&{opacity:.7}],onPress:async()=>{if(!t||!a)return void b.default.alert("\u26a0\ufe0f Campos requeridos","Por favor ingresa usuario y contrase\xf1a.");f(!0);const{data:o,error:r}=await d.from("users").select("*").eq("username",t).single();if(r||!o)return f(!1),void b.default.alert("\u274c Usuario no encontrado","Verifica tus datos.");const i=await T.default.compare(a,o.password_hash);f(!1),i?(await j.default.setItem("usuario",JSON.stringify(o)),b.default.alert("Bienvenido"),e.replace()):b.default.alert("\u274c Contrase\xf1a incorrecta")},disabled:c,children:(0,s.jsx)(n.default,{style:re.buttonText,children:c?"Ingresando...":"Ingresar"})})]})})})}const re=l.default.create({bg:{flex:1,backgroundColor:"#f0f2f5"},loginContainer:{width:"100%",maxWidth:400,marginTop:"6%",padding:32,backgroundColor:"#fff",borderRadius:16,shadowColor:"#000",shadowOffset:{width:0,height:4},shadowOpacity:.1,shadowRadius:15,elevation:8,alignItems:"center"},title:{fontSize:26,fontWeight:"bold",color:"#22223b",marginBottom:28,textAlign:"center",letterSpacing:1},input:{width:"100%",borderWidth:0,borderRadius:8,padding:14,marginBottom:18,backgroundColor:"#f7f7fa",fontSize:16,color:"#22223b",shadowColor:"#000",shadowOpacity:.04,shadowRadius:1,elevation:1},button:{width:"100%",backgroundColor:"#22223b",paddingVertical:14,borderRadius:8,alignItems:"center",marginTop:8},buttonText:{color:"#fff",fontWeight:"bold",fontSize:17,letterSpacing:1}});const ie=l.default.create({flash:{backgroundColor:"#d4edda",padding:10,borderRadius:6,margin:10,borderColor:"#c3e6cb",borderWidth:1},flashText:{color:"#155724",textAlign:"center",fontWeight:"bold"}});(0,a.default)((function(){const[e,t]=(0,r.useState)(!1),[o,a]=(0,r.useState)("");return(0,r.useEffect)((()=>{(async()=>{localStorage.getItem("usuario")&&t(!0)})()}),[]),(0,s.jsx)(f,{children:(0,s.jsxs)(i.default,{style:{flex:1},children:[""!==o&&(0,s.jsx)(i.default,{style:ie.flash,children:(0,s.jsx)(n.default,{style:ie.flashText,children:o})}),e?(0,s.jsx)(oe,{onLogout:()=>{t(!1),a("\ud83d\udeaa Has cerrado sesi\xf3n exitosamente"),setTimeout((()=>a("")),3e3)}}):(0,s.jsx)(ae,{navigation:{replace:()=>t(!0)}})]})})}))},9825:()=>{}},t={};function o(a){var r=t[a];if(void 0!==r)return r.exports;var i=t[a]={exports:{}};return e[a].call(i.exports,i,i.exports,o),i.exports}o.m=e,(()=>{var e=[];o.O=(t,a,r,i)=>{if(!a){var n=1/0;for(c=0;c<e.length;c++){for(var[a,r,i]=e[c],l=!0,d=0;d<a.length;d++)(!1&i||n>=i)&&Object.keys(o.O).every((e=>o.O[e](a[d])))?a.splice(d--,1):(l=!1,i<n&&(n=i));if(l){e.splice(c--,1);var s=r();void 0!==s&&(t=s)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[a,r,i]}})(),o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;o.t=function(a,r){if(1&r&&(a=this(a)),8&r)return a;if("object"===typeof a&&a){if(4&r&&a.__esModule)return a;if(16&r&&"function"===typeof a.then)return a}var i=Object.create(null);o.r(i);var n={};e=e||[null,t({}),t([]),t(t)];for(var l=2&r&&a;"object"==typeof l&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach((e=>n[e]=()=>a[e]));return n.default=()=>a,o.d(i,n),i}})(),o.d=(e,t)=>{for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce(((t,a)=>(o.f[a](e,t),t)),[])),o.u=e=>"static/js/"+e+".935c1a94.chunk.js",o.miniCssF=e=>{},o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="web:";o.l=(a,r,i,n)=>{if(e[a])e[a].push(r);else{var l,d;if(void 0!==i)for(var s=document.getElementsByTagName("script"),c=0;c<s.length;c++){var f=s[c];if(f.getAttribute("src")==a||f.getAttribute("data-webpack")==t+i){l=f;break}}l||(d=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,o.nc&&l.setAttribute("nonce",o.nc),l.setAttribute("data-webpack",t+i),l.src=a),e[a]=[r];var u=(t,o)=>{l.onerror=l.onload=null,clearTimeout(h);var r=e[a];if(delete e[a],l.parentNode&&l.parentNode.removeChild(l),r&&r.forEach((e=>e(o))),t)return t(o)},h=setTimeout(u.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=u.bind(null,l.onerror),l.onload=u.bind(null,l.onload),d&&document.head.appendChild(l)}}})(),o.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.p="/",(()=>{var e={792:0};o.f.j=(t,a)=>{var r=o.o(e,t)?e[t]:void 0;if(0!==r)if(r)a.push(r[2]);else{var i=new Promise(((o,a)=>r=e[t]=[o,a]));a.push(r[2]=i);var n=o.p+o.u(t),l=new Error;o.l(n,(a=>{if(o.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=a&&("load"===a.type?"missing":a.type),n=a&&a.target&&a.target.src;l.message="Loading chunk "+t+" failed.\n("+i+": "+n+")",l.name="ChunkLoadError",l.type=i,l.request=n,r[1](l)}}),"chunk-"+t,t)}},o.O.j=t=>0===e[t];var t=(t,a)=>{var r,i,[n,l,d]=a,s=0;if(n.some((t=>0!==e[t]))){for(r in l)o.o(l,r)&&(o.m[r]=l[r]);if(d)var c=d(o)}for(t&&t(a);s<n.length;s++)i=n[s],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(c)},a=self.webpackChunkweb=self.webpackChunkweb||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var a=o.O(void 0,[185],(()=>o(6782)));a=o.O(a)})();
//# sourceMappingURL=main.9c5c3c4d.js.map